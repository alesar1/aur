# Colored makepkg-like functions
all_off="$(tput sgr0)"
bold="${all_off}$(tput bold)"
blue="${bold}$(tput setaf 4)"
yellow="${bold}$(tput setaf 3)"

msg_blue() {
    printf "${blue}==>${bold} $1${all_off}\n"
}

note() {
    printf "${blue}==>${yellow} NOTE:${bold} $1${all_off}\n"
}

pre_install() {
    _update
}

_update() {
    if ! getent passwd curly_turtle &>/dev/null; then
        msg_blue "Adding user 'curly_turtle'"
        useradd -m -r -U -d /usr/lib/node_modules/curly-turtle -s /bin/false curly_turtle &>/dev/null
    fi
    chown -R curly_turtle:curly_turtle /usr/lib/node_modules/curly-turtle
}

post_install() {
    _update
    note "Before run curly_turtle, follow https://github.com/FiveYellowMice/curly-turtle to create a config file ."
    note "And follow https://github.com/FiveYellowMice/curly-turtle/wiki/Daemon to start it ."
    
}

post_upgrade() {
    _update
}

post_remove() {
    if getent passwd curly_turtle &>/dev/null; then
        msg_blue "Removing user 'curly_turtle'"
        userdel -rf curly_turtle &>/dev/null
    fi
}

