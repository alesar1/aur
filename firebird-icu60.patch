From 317ab524ddb41f8d41c16b9d4fe7e87bb953883b Mon Sep 17 00:00:00 2001
From: AlexPeshkoff <alexander.peshkoff@gmail.com>
Date: Sat, 10 Feb 2018 19:53:37 +0300
Subject: [PATCH] Make it build with icu60

---
 src/intl/cs_icu.cpp      | 5 +++++
 src/intl/cv_icu.cpp      | 5 +++++
 src/jrd/unicode_util.cpp | 6 ++++++
 3 files changed, 16 insertions(+)

diff --git a/src/intl/cs_icu.cpp b/src/intl/cs_icu.cpp
index c4f9a3f52e..94e32540cf 100644
--- a/src/intl/cs_icu.cpp
+++ b/src/intl/cs_icu.cpp
@@ -28,6 +28,11 @@
 #include "../intl/ldcommon.h"
 #include "cs_icu.h"
 #include "cv_icu.h"
+
+#undef U_SHOW_CPLUSPLUS_API
+#define U_SHOW_CPLUSPLUS_API 0
+#undef UCHAR_TYPE
+#define UCHAR_TYPE uint16_t
 #include "unicode/ucnv.h"
 
 
diff --git a/src/intl/cv_icu.cpp b/src/intl/cv_icu.cpp
index f5f559f011..f226cc25de 100644
--- a/src/intl/cv_icu.cpp
+++ b/src/intl/cv_icu.cpp
@@ -28,6 +28,11 @@
 #include "../intl/ldcommon.h"
 #include "ld_proto.h"
 #include "cv_icu.h"
+
+#undef U_SHOW_CPLUSPLUS_API
+#define U_SHOW_CPLUSPLUS_API 0
+#undef UCHAR_TYPE
+#define UCHAR_TYPE uint16_t
 #include "unicode/ucnv.h"
 
 
diff --git a/src/jrd/unicode_util.cpp b/src/jrd/unicode_util.cpp
index 19f7016d8d..bda87f9b25 100644
--- a/src/jrd/unicode_util.cpp
+++ b/src/jrd/unicode_util.cpp
@@ -37,6 +37,12 @@
 #include "../common/classes/init.h"
 #include "../common/classes/objects_array.h"
 #include "../common/classes/rwlock.h"
+
+#undef U_SHOW_CPLUSPLUS_API
+#define U_SHOW_CPLUSPLUS_API 0
+#undef UCHAR_TYPE
+#define UCHAR_TYPE uint16_t
+
 #include "unicode/ustring.h"
 #include "unicode/utrans.h"
 #include "unicode/uchar.h"
