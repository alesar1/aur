--- pymclevel/setup_leveldb.py.orig	2018-02-14 05:21:27.948494140 -0700
+++ pymclevel/setup_leveldb.py	2018-02-14 05:22:42.476492806 -0700
@@ -255,12 +255,19 @@
                         fd.seek(0)
                         fd.write(f_data.replace(hook, c_data))
 
+    with open("db/snappy_compressor.cc", "r+") as f:
+        data = f.read().replace("#include <snappy/snappy.h>", "#include <snappy.h>")
+        f.seek(0)
+        f.write(data)
+        f.truncate()
+
     if zlib:
         with open("Makefile", "r+") as f:
             # If '-lz' is specified, we *may* need to specify the full library path. Just force it to be sure.
             data = f.read().replace("LIBS += $(PLATFORM_LIBS) -lz", "LIBS += $(PLATFORM_LIBS) %s" % zlib)
             # All the same if a path is specified, we need the one we found here. (SuSE don't have a /lib/x64_86-linux-gnu directory.)
             data = data.replace("LIBS += $(PLATFORM_LIBS) /lib/x86_64-linux-gnu/libz.so.1.2.8", "LIBS += $(PLATFORM_LIBS) %s" % zlib)
+            data = data.replace("	db/autocompact_test \\", "#	db/autocompact_test \\")
             f.seek(0)
             f.write(data)
     cpath = os.environ.get("CPATH")
