--- a/Makefile.common
+++ b/Makefile.common
@@ -86,9 +86,8 @@ endif
 
 ifeq ($(HAVE_CHD), 1)
    FLAGS += -DHAVE_CHD -D_7ZIP_ST
-   INCFLAGS += \
-   -I$(DEPS_DIR)/lzma-19.00/include \
-   -I$(DEPS_DIR)/libchdr/include
+   INCFLAGS += $(shell pkg-config --cflags libchdr)
+   LIBS += $(shell pkg-config --libs libchdr)
 endif
 
 ifeq ($(NEED_TREMOR), 1)
@@ -155,22 +154,6 @@ endif
    FLAGS += -DNEED_CD
 
 ifeq ($(HAVE_CHD), 1)
-SOURCES_C += \
-	$(DEPS_DIR)/lzma-19.00/src/Alloc.c \
-	$(DEPS_DIR)/lzma-19.00/src/Bra86.c \
-	$(DEPS_DIR)/lzma-19.00/src/BraIA64.c \
-	$(DEPS_DIR)/lzma-19.00/src/CpuArch.c \
-	$(DEPS_DIR)/lzma-19.00/src/Delta.c \
-	$(DEPS_DIR)/lzma-19.00/src/LzFind.c \
-	$(DEPS_DIR)/lzma-19.00/src/Lzma86Dec.c \
-	$(DEPS_DIR)/lzma-19.00/src/LzmaDec.c \
-	$(DEPS_DIR)/lzma-19.00/src/LzmaEnc.c \
-	$(DEPS_DIR)/libchdr/src/libchdr_bitstream.c \
-	$(DEPS_DIR)/libchdr/src/libchdr_cdrom.c \
-	$(DEPS_DIR)/libchdr/src/libchdr_chd.c \
-	$(DEPS_DIR)/libchdr/src/libchdr_flac.c \
-	$(DEPS_DIR)/libchdr/src/libchdr_huffman.c
-
 SOURCES_CXX += \
 	$(CDROM_DIR)/CDAccess_CHD.cpp
 endif
@@ -197,14 +180,6 @@ SOURCES_C += $(MEDNAFEN_DIR)/mednafen-endian.c \
 SOURCES_CXX += $(MEDNAFEN_DIR)/hash/sha256.cpp \
 					$(MEDNAFEN_DIR)/hash/md5.cpp
 
-ifeq ($(SYSTEM_ZLIB), 1)
-	INCFLAGS += $(shell pkg-config --cflags zlib)
-	LIBS += $(shell pkg-config --libs zlib)
-else
-	INCFLAGS += $(ZLIB_INCFLAGS)
-	SOURCES_C += $(ZLIB_SOURCES_C)
-endif
-
 ifneq ($(STATIC_LINKING), 1)
 SOURCES_C += $(LIBRETRO_DIR)/streams/file_stream.c \
 				 $(LIBRETRO_DIR)/streams/file_stream_transforms.c \
