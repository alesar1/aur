diff --git a/include/klee/Internal/Support/PrintVersion.h b/include/klee/Internal/Support/PrintVersion.h
index 2c375ad..576b8c6 100644
--- a/include/klee/Internal/Support/PrintVersion.h
+++ b/include/klee/Internal/Support/PrintVersion.h
@@ -10,8 +10,17 @@
 #ifndef KLEE_PRINT_VERSION_H
 #define KLEE_PRINT_VERSION_H
 
+#include "klee/Config/Version.h"
+#if LLVM_VERSION_CODE >= LLVM_VERSION(6, 0)
+#include <llvm/Support/raw_ostream.h>
+#endif
+
 namespace klee {
-  void printVersion();
+#if LLVM_VERSION_CODE < LLVM_VERSION(6, 0)
+void printVersion();
+#else
+void printVersion(llvm::raw_ostream &outs);
+#endif
 }
 
 #endif
diff --git a/lib/Core/StatsTracker.cpp b/lib/Core/StatsTracker.cpp
index ecf90bd..07476fa 100644
--- a/lib/Core/StatsTracker.cpp
+++ b/lib/Core/StatsTracker.cpp
@@ -441,8 +441,10 @@ void StatsTracker::writeStatsHeader() {
              << "'ResolveTime',"
              << "'QueryCexCacheMisses',"
              << "'QueryCexCacheHits',"
+#if LLVM_VERSION_CODE < LLVM_VERSION(6, 0)
 #ifdef KLEE_ARRAY_DEBUG
 	     << "'ArrayHashTime',"
+#endif
 #endif
              << ")\n";
   statsFile->flush();
@@ -473,8 +475,10 @@ void StatsTracker::writeStatsLine() {
              << "," << stats::resolveTime / 1000000.
              << "," << stats::queryCexCacheMisses
              << "," << stats::queryCexCacheHits
+#if LLVM_VERSION_CODE < LLVM_VERSION(6, 0)
 #ifdef KLEE_ARRAY_DEBUG
              << "," << stats::arrayHashTime / 1000000.
+#endif
 #endif
              << ")\n";
   statsFile->flush();
diff --git a/lib/Module/RaiseAsm.cpp b/lib/Module/RaiseAsm.cpp
index d9b3e40..f5dac50 100644
--- a/lib/Module/RaiseAsm.cpp
+++ b/lib/Module/RaiseAsm.cpp
@@ -18,10 +18,18 @@
 #include "llvm/Support/raw_ostream.h"
 #include "llvm/Support/Host.h"
 #include "llvm/Support/TargetRegistry.h"
+#if LLVM_VERSION_CODE < LLVM_VERSION(6, 0)
 #include "llvm/Target/TargetLowering.h"
+#else
+#include "llvm/CodeGen/TargetLowering.h"
+#endif
 #if LLVM_VERSION_CODE >= LLVM_VERSION(3, 6)
 #include "llvm/Target/TargetMachine.h"
+#if LLVM_VERSION_CODE < LLVM_VERSION(6, 0)
 #include "llvm/Target/TargetSubtargetInfo.h"
+#else
+#include "llvm/CodeGen/TargetSubtargetInfo.h"
+#endif
 #endif
 
 using namespace llvm;
diff --git a/lib/Support/PrintVersion.cpp b/lib/Support/PrintVersion.cpp
index d39249d..c0609f1 100644
--- a/lib/Support/PrintVersion.cpp
+++ b/lib/Support/PrintVersion.cpp
@@ -14,20 +14,27 @@
 
 #include "klee/Config/CompileTimeInfo.h"
 
+#if LLVM_VERSION_CODE < LLVM_VERSION(6, 0)
 void klee::printVersion()
-{
-  llvm::outs() << PACKAGE_STRING " (" PACKAGE_URL ")\n";
-#ifdef KLEE_ENABLE_TIMESTAMP
-  llvm::outs() << "  Built " __DATE__ " (" __TIME__ ")\n";
-#endif
-  llvm::outs() << "  Build mode: " << KLEE_BUILD_MODE "\n";
-  llvm::outs() << "  Build revision: ";
-#ifdef KLEE_BUILD_REVISION
-  llvm::outs() << KLEE_BUILD_REVISION "\n";
 #else
-  llvm::outs() << "unknown\n";
+void klee::printVersion(llvm::raw_ostream &outs)
+#endif
+{
+#if LLVM_VERSION_CODE < LLVM_VERSION(6, 0)
+  auto &outs = llvm::outs();
+#endif
+  outs << PACKAGE_STRING " (" PACKAGE_URL ")\n";
+#ifdef KLEE_ENABLE_TIMESTAMP
+  outs << "  Built " __DATE__ " (" __TIME__ ")\n";
+#endif
+  outs << "  Build mode: " << KLEE_BUILD_MODE "\n";
+  outs << "  Build revision: ";
+#ifdef KLEE_BUILD_REVISION
+  outs << KLEE_BUILD_REVISION "\n";
+#else
+  outs << "unknown\n";
 #endif
   // Show LLVM version information
-  llvm::outs() << "\n";
+  outs << "\n";
   llvm::cl::PrintVersionMessage();
 }
