--- ./amd/amdkfd/kfd_doorbell.c.orig	2019-07-06 00:42:03.000000000 +0000
+++ ./amd/amdkfd/kfd_doorbell.c	2019-07-23 17:48:36.552435159 +0000
@@ -156,7 +156,11 @@
 }
 
 
-#if LINUX_VERSION_CODE >= KERNEL_VERSION(4, 11, 0)
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(5, 1, 0)
+vm_fault_t kfd_doorbell_vm_fault(struct vm_fault *vmf)
+{
+	struct kfd_process_device *pdd = vmf->vma->vm_private_data;
+#elif LINUX_VERSION_CODE >= KERNEL_VERSION(4, 11, 0)
 static int kfd_doorbell_vm_fault(struct vm_fault *vmf)
 {
 	struct kfd_process_device *pdd = vmf->vma->vm_private_data;
