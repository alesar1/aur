From 62de8ca0b18223cda8b9ad8ecd1ff1e700ad2561 Mon Sep 17 00:00:00 2001
From: Nikos Mavrogiannopoulos <nmav@redhat.com>
Date: Tue, 24 Nov 2015 12:54:32 +0100
Subject: [PATCH] tools: don't call endservent in windows

---
 src/socket.c | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/src/socket.c b/src/socket.c
index 8991089..be8a4a1 100644
--- a/src/socket.c
+++ b/src/socket.c
@@ -33,8 +33,11 @@
 #include <stdlib.h>
 #include <unistd.h>
 #ifndef _WIN32
-#include <arpa/inet.h>
-#include <signal.h>
+# include <arpa/inet.h>
+# include <signal.h>
+#else
+# undef endservent
+# define endservent()
 #endif
 #include <socket.h>
 #include <c-ctype.h>
--
libgit2 0.24.0

