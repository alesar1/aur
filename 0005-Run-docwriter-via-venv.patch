From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: "Jan Alexander Steffens (heftig)" <heftig@archlinux.org>
Date: Fri, 23 Jul 2021 21:27:19 +0000
Subject: [PATCH] Run docwriter via venv

---
 builds/meson/generate_reference_docs.py | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/builds/meson/generate_reference_docs.py b/builds/meson/generate_reference_docs.py
index 15d9b066005e..124c174ff570 100644
--- a/builds/meson/generate_reference_docs.py
+++ b/builds/meson/generate_reference_docs.py
@@ -65,22 +65,24 @@ def main():
             "Not a directory: " + args.output_dir
         )
 
+    executable = os.getenv("DOCWRITER_PYTHON")
+
     cmds = [
-        sys.executable,
+        executable,
         "-m",
         "docwriter",
         "--prefix=ft2",
         "--title=FreeType-" + args.version,
         "--site=reference",
         "--output=" + args.output_dir,
     ] + all_headers
 
     print("Running docwriter...")
     subprocess.check_call(cmds)
 
     print("Building static site...")
     subprocess.check_call(
-        [sys.executable, "-m", "mkdocs", "build"], cwd=args.output_dir
+        [executable, "-m", "mkdocs", "build"], cwd=args.output_dir
     )
     return 0
 
