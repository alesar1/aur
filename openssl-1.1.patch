diff -Naur ekg2-master.orig/plugins/sim/simlite.c ekg2-master/plugins/sim/simlite.c
--- ekg2-master.orig/plugins/sim/simlite.c	2016-04-19 19:08:06.000000000 +0200
+++ ekg2-master/plugins/sim/simlite.c	2018-02-10 01:22:10.926116454 +0100
@@ -185,7 +185,7 @@
 	RSA *key = sim_key_read(uid, NULL);
 	unsigned char md_value[EVP_MAX_MD_SIZE], *buf, *newbuf;
 	char *result = NULL;
-	EVP_MD_CTX ctx;
+	EVP_MD_CTX *ctx;
 	unsigned int md_len;
 	int size, i;
 
@@ -209,9 +209,9 @@
 	else
 		size = i2d_RSAPrivateKey(key, &newbuf);
 	
-	EVP_DigestInit(&ctx, EVP_sha1());	
-	EVP_DigestUpdate(&ctx, buf, size);
-	EVP_DigestFinal(&ctx, md_value, &md_len);
+	EVP_DigestInit(ctx, EVP_sha1());	
+	EVP_DigestUpdate(ctx, buf, size);
+	EVP_DigestFinal(ctx, md_value, &md_len);
 
 	free(buf);
 
