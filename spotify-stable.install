post_install()
{
	echo -e "\nInstalling Spotify..."

	mv /tmp/spotify-stable /opt/spotify
	chown -R root.root /opt/spotify
	ln -s /opt/spotify/spotify-client/spotify /usr/bin/spotify

	echo "Installing Spotify icons..."

	xdg-icon-resource install --size 16 /opt/spotify/spotify-client/Icons/spotify-linux-16.png "spotify-client"
	xdg-icon-resource install --size 22 /opt/spotify/spotify-client/Icons/spotify-linux-22.png "spotify-client"
	xdg-icon-resource install --size 24 /opt/spotify/spotify-client/Icons/spotify-linux-24.png "spotify-client"
	xdg-icon-resource install --size 32 /opt/spotify/spotify-client/Icons/spotify-linux-32.png "spotify-client"
	xdg-icon-resource install --size 48 /opt/spotify/spotify-client/Icons/spotify-linux-48.png "spotify-client"
	xdg-icon-resource install --size 64 /opt/spotify/spotify-client/Icons/spotify-linux-64.png "spotify-client"
	xdg-icon-resource install --size 128 /opt/spotify/spotify-client/Icons/spotify-linux-128.png "spotify-client"
	xdg-icon-resource install --size 256 /opt/spotify/spotify-client/Icons/spotify-linux-256.png "spotify-client"
	xdg-icon-resource install --size 512 /opt/spotify/spotify-client/Icons/spotify-linux-512.png "spotify-client"

	echo "Adding Spotify to applications menu..."

	cp -p /opt/spotify/spotify-client/spotify.desktop /usr/share/applications/

	echo "Adding license URL to /usr/share/licenses/spotify-stable/LICENSE..."

	mkdir -p /usr/share/licenses/spotify-stable
	echo "https://www.spotify.com/legal/end-user-agreement/" > /usr/share/licenses/spotify-stable/LICENSE

	echo -e "Spotify installed!\n"
}

pre_remove()
{
	echo -e "\nUninstalling Spotify..."

	xdg-icon-resource uninstall --size 16 /opt/spotify/spotify-client/Icons/spotify-linux-16.png "spotify-client"
	xdg-icon-resource uninstall --size 22 /opt/spotify/spotify-client/Icons/spotify-linux-22.png "spotify-client"
	xdg-icon-resource uninstall --size 24 /opt/spotify/spotify-client/Icons/spotify-linux-24.png "spotify-client"
	xdg-icon-resource uninstall --size 32 /opt/spotify/spotify-client/Icons/spotify-linux-32.png "spotify-client"
	xdg-icon-resource uninstall --size 48 /opt/spotify/spotify-client/Icons/spotify-linux-48.png "spotify-client"
	xdg-icon-resource uninstall --size 64 /opt/spotify/spotify-client/Icons/spotify-linux-64.png "spotify-client"
	xdg-icon-resource uninstall --size 128 /opt/spotify/spotify-client/Icons/spotify-linux-128.png "spotify-client"
	xdg-icon-resource uninstall --size 256 /opt/spotify/spotify-client/Icons/spotify-linux-256.png "spotify-client"
	xdg-icon-resource uninstall --size 512 /opt/spotify/spotify-client/Icons/spotify-linux-512.png "spotify-client"

	rm -f /usr/share/applications/spotify.desktop
	rm -f /usr/bin/spotify
	rm -rf /opt/spotify

	echo -e "Spotify uninstalled!\n"
}
