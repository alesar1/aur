From 588958f9148b363185aa06192360c95b0dcfd25a Mon Sep 17 00:00:00 2001
From: Franz Beaune <franz@appleseedhq.net>
Date: Mon, 30 Dec 2019 16:16:06 +0100
Subject: [PATCH] Fix compilation with Boost 1.72+ and Qt 5.14.0

---
 src/appleseed.shared/application/application.cpp          | 3 +++
 .../mainwindow/rendering/pixelcolortracker.cpp            | 8 ++++----
 src/appleseed/foundation/platform/path.h                  | 1 +
 .../foundation/utility/benchmark/benchmarkaggregator.cpp  | 3 +--
 4 files changed, 9 insertions(+), 6 deletions(-)

diff --git a/src/appleseed.shared/application/application.cpp b/src/appleseed.shared/application/application.cpp
index 9f0e5d0ecd..a5c8077a61 100644
--- a/src/appleseed.shared/application/application.cpp
+++ b/src/appleseed.shared/application/application.cpp
@@ -39,6 +39,9 @@
 #include "foundation/utility/settings.h"
 #include "foundation/utility/string.h"
 
+// Boost headers.
+#include "boost/filesystem/exception.hpp"
+
 // Standard headers.
 #include <cstring>
 #include <string>
diff --git a/src/appleseed.studio/mainwindow/rendering/pixelcolortracker.cpp b/src/appleseed.studio/mainwindow/rendering/pixelcolortracker.cpp
index 0a7cfcac39..4e6fa0a287 100644
--- a/src/appleseed.studio/mainwindow/rendering/pixelcolortracker.cpp
+++ b/src/appleseed.studio/mainwindow/rendering/pixelcolortracker.cpp
@@ -133,10 +133,10 @@ void PixelColorTracker::set_rgba_labels(const QPoint& point) const
             static_cast<size_t>(pixel.y),
             linear_rgba);
 
-        m_r_label->setText(QString().sprintf("%4.3f", linear_rgba.r));
-        m_g_label->setText(QString().sprintf("%4.3f", linear_rgba.g));
-        m_b_label->setText(QString().sprintf("%4.3f", linear_rgba.b));
-        m_a_label->setText(QString().sprintf("%4.3f", linear_rgba.a));
+        m_r_label->setText(QString::number(linear_rgba.r, 'f', 3));
+        m_g_label->setText(QString::number(linear_rgba.g, 'f', 3));
+        m_b_label->setText(QString::number(linear_rgba.b, 'f', 3));
+        m_a_label->setText(QString::number(linear_rgba.a, 'f', 3));
     }
     else
     {
diff --git a/src/appleseed/foundation/platform/path.h b/src/appleseed/foundation/platform/path.h
index cb243c50f2..8d3a410dc9 100644
--- a/src/appleseed/foundation/platform/path.h
+++ b/src/appleseed/foundation/platform/path.h
@@ -40,6 +40,7 @@
 #include "main/dllsymbol.h"
 
 // Boost headers.
+#include "boost/filesystem/exception.hpp"
 #include "boost/filesystem/operations.hpp"
 #include "boost/filesystem/path.hpp"
 
diff --git a/src/appleseed/foundation/utility/benchmark/benchmarkaggregator.cpp b/src/appleseed/foundation/utility/benchmark/benchmarkaggregator.cpp
index 870ab8e04d..7ccfb47e09 100644
--- a/src/appleseed/foundation/utility/benchmark/benchmarkaggregator.cpp
+++ b/src/appleseed/foundation/utility/benchmark/benchmarkaggregator.cpp
@@ -40,8 +40,7 @@
 
 // Boost headers.
 #include "boost/date_time/posix_time/posix_time.hpp"
-#include "boost/filesystem/operations.hpp"
-#include "boost/filesystem/path.hpp"
+#include "boost/filesystem.hpp"
 #include "boost/regex.hpp"
 
