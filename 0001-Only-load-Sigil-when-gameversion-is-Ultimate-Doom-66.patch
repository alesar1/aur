From 5690872369e59ad106add2573eed748cf0e9f741 Mon Sep 17 00:00:00 2001
From: kitchen-ace <47063032+kitchen-ace@users.noreply.github.com>
Date: Fri, 4 Sep 2020 16:56:23 -0400
Subject: [PATCH] Only load Sigil when gameversion is Ultimate Doom (#661)

Fixes errors caused by Sigil being loaded playing Chex Quest.

Co-authored-by: kitchen-ace <68k@quikphix.org>
---
 src/doom/d_main.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/doom/d_main.c b/src/doom/d_main.c
index b89631f5..7571cfbb 100644
--- a/src/doom/d_main.c
+++ b/src/doom/d_main.c
@@ -1852,7 +1852,7 @@ void D_DoomMain (void)
     // [crispy] allow overriding of special-casing
     if (!M_ParmExists("-noautoload") && gamemode != shareware)
     {
-	if (gamemode == retail)
+	if (gamemode == retail && gameversion == exe_ultimate)
 	{
 		D_LoadSigilWad();
 	}
-- 
2.28.0

