diff --git a/src/gpuvis_etl.cpp b/src/gpuvis_etl.cpp
index 549c4f29d6aaa3cad99e..26d1ad9fdea6da5bed72 100644
--- a/src/gpuvis_etl.cpp
+++ b/src/gpuvis_etl.cpp
@@ -22,6 +22,18 @@
  * THE SOFTWARE.
  */
 
+#include <cstddef>
+#include <cstdlib>
+#include <string>
+#include <unordered_map>
+#include <vector>
+#include <functional>
+
+#define GPUVIS_TRACE_IMPLEMENTATION
+#include "gpuvis_macros.h"
+
+#include "trace-cmd/trace-read.h"
+
 // Parsing ETL files is only supported on windows
 // We heavily rely on the TDH windows library for the heavy lifting
 #ifdef _WIN32
diff --git a/src/gpuvis_macros.h b/src/gpuvis_macros.h
index 8efa70e19f7e68906832..416acc8a53a755412d9e 100644
--- a/src/gpuvis_macros.h
+++ b/src/gpuvis_macros.h
@@ -24,6 +24,8 @@
 #ifndef GPUVIS_MACROS_H_
 #define GPUVIS_MACROS_H_
 
+#include <string.h>
+
 // Disable gpuvis ftrace tracing by default
 #define GPUVIS_TRACE_UTILS_DISABLE
 #include "../sample/gpuvis_trace_utils.h"
