diff --git a/src/calibre/db/backend.py b/src/calibre/db/backend.py
index 71978c8..7bbfae8 100644
--- a/src/calibre/db/backend.py
+++ b/src/calibre/db/backend.py
@@ -12,6 +12,7 @@ import glob
 import hashlib
 import json
 import os
+import re
 import shutil
 import sys
 import time
@@ -38,7 +39,7 @@ from calibre.utils import pickle_binary_string, unpickle_binary_string
 from calibre.utils.config import from_json, prefs, to_json, tweaks
 from calibre.utils.date import EPOCH, parse_date, utcfromtimestamp, utcnow
 from calibre.utils.filenames import (
-    WindowsAtomicFolderMove, ascii_filename, atomic_rename, copyfile_using_links,
+    WindowsAtomicFolderMove, atomic_rename, copyfile_using_links,
     copytree_using_links, hardlink_file, is_case_sensitive, remove_dir_if_empty,
     samefile
 )
@@ -54,6 +55,10 @@ from polyglot.builtins import (
 # }}}
 
 
+def safe_filename(filename):
+    return re.sub(r"[\/\\\:\*\?\"\<\>\|]", "_", filename)
+
+
 class FTSQueryError(ValueError):
 
     def __init__(self, query, sql_statement, apsw_error):
@@ -1249,8 +1254,8 @@ class DB:
         '''
         book_id = ' (%d)' % book_id
         l = self.PATH_LIMIT - (len(book_id) // 2) - 2
-        author = ascii_filename(author)[:l]
-        title  = ascii_filename(title.lstrip())[:l].rstrip()
+        author = safe_filename(author)[:l]
+        title  = safe_filename(title.lstrip())[:l].rstrip()
         if not title:
             title = 'Unknown'[:l]
         try:
@@ -1259,7 +1264,7 @@ class DB:
         except IndexError:
             author = ''
         if not author:
-            author = ascii_filename(_('Unknown'))
+            author = safe_filename(_('Unknown'))
         if author.upper() in WINDOWS_RESERVED_NAMES:
             author += 'w'
         return f'{author}/{title}{book_id}'
@@ -1276,15 +1281,15 @@ class DB:
         l = (self.PATH_LIMIT - (extlen // 2) - 2) if iswindows else ((self.PATH_LIMIT - extlen - 2) // 2)
         if l < 5:
             raise ValueError('Extension length too long: %d' % extlen)
-        author = ascii_filename(author)[:l]
-        title  = ascii_filename(title.lstrip())[:l].rstrip()
+        author = safe_filename(author)[:l]
+        title  = safe_filename(title.lstrip())[:l].rstrip()
         if not title:
             title = 'Unknown'[:l]
         name   = title + ' - ' + author
         while name.endswith('.'):
             name = name[:-1]
         if not name:
-            name = ascii_filename(_('Unknown'))
+            name = safe_filename(_('Unknown'))
         return name
 
     # Database layer API {{{
