
diff --git a/common/libavsmash.c b/common/libavsmash.c
index dacd63a..b7b4a56 100644
--- a/common/libavsmash.c
+++ b/common/libavsmash.c
@@ -83,9 +83,6 @@ lsmash_root_t *libavsmash_open_file
         strcpy( error_string, "The number of tracks equals 0.\n" );
         goto open_fail;
     }
-    /* libavformat */
-    av_register_all();
-    avcodec_register_all();
     if( avformat_open_input( p_format_ctx, file_name, NULL, NULL ) )
     {
         strcpy( error_string, "Failed to avformat_open_input.\n" );
diff --git a/common/lwindex.c b/common/lwindex.c
index 234e14a..91e7c5f 100644
--- a/common/lwindex.c
+++ b/common/lwindex.c
@@ -3229,8 +3229,6 @@ int lwlibav_construct_index
         {
             /* Opening and parsing the index file succeeded. */
             fclose( index );
-            av_register_all();
-            avcodec_register_all();
             lwhp->threads = opt->threads;
             return 0;
         }
@@ -3246,8 +3244,6 @@ int lwlibav_construct_index
         if( has_lwi_ext )
             lwhp->file_path[file_path_length - 4] = '\0';
     }
-    av_register_all();
-    avcodec_register_all();
     AVFormatContext *format_ctx = NULL;
     if( lavf_open_file( &format_ctx, lwhp->file_path, lhp ) )
     {
diff --git a/common/osdep.c b/common/osdep.c
index d81e47f..a6900fe 100644
--- a/common/osdep.c
+++ b/common/osdep.c
@@ -65,3 +65,5 @@ FILE *lw_win32_fopen( const char *name, const char *mode )
 }
 
 #endif
+
+typedef int make_iso_compilers_happy;
diff --git a/VapourSynth/video_output.c b/VapourSynth/video_output.c
index 4599863..45a1fb0 100644
--- a/VapourSynth/video_output.c
+++ b/VapourSynth/video_output.c
@@ -20,7 +20,7 @@
 
 /* This file is available under an ISC license. */
 
-#include <string.h>
+#include <strings.h>
 
 /* Libav */
 #include <libavcodec/avcodec.h>         /* Decoder */
