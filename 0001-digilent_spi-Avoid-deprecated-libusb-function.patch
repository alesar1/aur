From 5a5097b2c2295031b4e170c27beddcc7116be420 Mon Sep 17 00:00:00 2001
From: Luke Street <luke.street@encounterpc.com>
Date: Tue, 26 Jun 2018 18:37:35 +0000
Subject: [PATCH] digilent_spi: Avoid deprecated libusb function

Same logic used in ch341a_spi (291764a70e6d8b212680e311bfb0825abf2b9a2f)

Change-Id: I3546760ab70a5700b739bcaae8f1591730c172dc
---
 digilent_spi.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/digilent_spi.c b/digilent_spi.c
index 458e1b6..d42c90f 100644
--- a/digilent_spi.c
+++ b/digilent_spi.c
@@ -386,7 +386,11 @@ int digilent_spi_init(void)
 		return -1;
 	}
 
+#if LIBUSB_API_VERSION < 0x01000106
 	libusb_set_debug(NULL, 3);
+#else
+	libusb_set_option(NULL, LIBUSB_OPTION_LOG_LEVEL, LIBUSB_LOG_LEVEL_INFO);
+#endif
 
 	uint16_t vid = devs_digilent_spi[0].vendor_id;
 	uint16_t pid = devs_digilent_spi[0].device_id;
-- 
2.17.0

