From 211dd1a8b36dc5fecd4bc5149f54ffc1a6a85315 Mon Sep 17 00:00:00 2001
From: Fabian Greffrath <fabian@greffrath.com>
Date: Tue, 22 Sep 2020 12:18:33 +0200
Subject: [PATCH] prevent crashes with simultaneous use of -record and
 -pistolstart

Thanks Spie812.
---
 src/doom/g_game.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/src/doom/g_game.c b/src/doom/g_game.c
index 934d8bf7..84332889 100644
--- a/src/doom/g_game.c
+++ b/src/doom/g_game.c
@@ -886,6 +886,7 @@ void G_DoLoadLevel (void)
             const char message[] = "The -pistolstart option is not suppported"
                                    " for demos and\n"
                                    " network play.";
+            if (!demo_p) demorecording = false;
             I_Error(message);
         }
     }
-- 
2.28.0

