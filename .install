_update() {
    update-desktop-database -q

    xdg-icon-resource forceupdate --theme hicolor &>/dev/null

    gtk-update-icon-cache -q -t -f usr/share/icons/hicolor

    ln -sf /opt/whatsie/whatsie /usr/bin/whatsie
}

post_install() {
    _update
}

post_upgrade() {
    post_install
}

post_remove() {
    # Delete the link to the binary
    rm -f /usr/bin/whatsie

    _update
}
