From d55e5ca2bd7544ceeb573cb24fe7cfe51a555c6b Mon Sep 17 00:00:00 2001
From: Nicola Murino <nicola.murino@gmail.com>
Date: Thu, 26 Jul 2018 14:44:20 +0200
Subject: [PATCH] gnome-shell: fix install dir

---
 gnome-shell/meson.build              | 2 +-
 gnome-shell/src/meson.build          | 2 +-
 sessions/meson.build                 | 2 +-
 sessions/meson/install-dock-override | 2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/gnome-shell/meson.build b/gnome-shell/meson.build
index 7a1ce6dd..5de2ea79 100644
--- a/gnome-shell/meson.build
+++ b/gnome-shell/meson.build
@@ -1,3 +1,3 @@
-gnomeshell_theme_dir = join_paths(get_option('datadir'), 'gnome-shell', 'theme')
+gnomeshell_theme_dir = join_paths(get_option('datadir'), 'themes')
 
 subdir('src')
diff --git a/gnome-shell/src/meson.build b/gnome-shell/src/meson.build
index b0fb61a1..c4a59f73 100644
--- a/gnome-shell/src/meson.build
+++ b/gnome-shell/src/meson.build
@@ -1,5 +1,5 @@
 # destination directory
-install_dir = join_paths(gnomeshell_theme_dir, meson.project_name())
+install_dir = join_paths(gnomeshell_theme_dir, meson.project_name(), 'gnome-shell')
 
 # generate .css files
 theme_sources = files([
diff --git a/sessions/meson.build b/sessions/meson.build
index 4922cd2f..e07af06c 100644
--- a/sessions/meson.build
+++ b/sessions/meson.build
@@ -1,4 +1,4 @@
-gnomeshell_mode_dir = join_paths(get_option('datadir'), 'gnome-shell', 'modes')
+gnomeshell_mode_dir = join_paths(get_option('datadir'), 'themes', meson.project_name(), 'gnome-shell', 'modes')
 
 # NOTE: GNOME Shell only accept lowercase mode names.
 replace_name = find_program('../build-helpers/replace-name')
diff --git a/sessions/meson/install-dock-override b/sessions/meson/install-dock-override
index d8a74050..b716ef41 100755
--- a/sessions/meson/install-dock-override
+++ b/sessions/meson/install-dock-override
@@ -1,7 +1,7 @@
 #!/bin/sh
 set -eu
 
-DOCK_DIR="${MESON_INSTALL_DESTDIR_PREFIX}/share/gnome-shell/extensions/ubuntu-dock@ubuntu.com"
+DOCK_DIR="${MESON_INSTALL_DESTDIR_PREFIX}/share/themes/Yaru/gnome-shell/extensions/ubuntu-dock@ubuntu.com"
 
 mkdir -p "${DOCK_DIR}"
 touch "${DOCK_DIR}/$1.css"
-- 
2.18.0

