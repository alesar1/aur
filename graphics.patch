--- src/system76/src/graphics.rs	2018-09-11 20:08:40.269995504 -0700
+++ src/system76/src/graphics.rs.new	2018-09-11 20:10:14.403327798 -0700
@@ -12,10 +12,10 @@
 blacklist nvidia
 blacklist nvidia-drm
 blacklist nvidia-modeset
-alias nouveau off
-alias nvidia off
-alias nvidia-drm off
-alias nvidia-modeset off
+#alias nouveau off
+#alias nvidia off
+#alias nvidia-drm off
+#alias nvidia-modeset off
 "#;
 
 pub struct Graphics {
@@ -135,12 +135,12 @@
                 }
             }
 
-            info!("Updating initramfs");
-            let status = process::Command::new("update-initramfs").arg("-u").status()?;
+            info!("Updating mkinitcpio");
+            let status = process::Command::new("mkinitcpio").arg("-P").status()?;
             if ! status.success() {
                 return Err(io::Error::new(
                     io::ErrorKind::Other,
-                    format!("update-initramfs: failed with {}", status)
+                    format!("mkinitcpio: failed with {}", status)
                 ));
             }
 
