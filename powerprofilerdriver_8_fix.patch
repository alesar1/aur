diff --git a/src/PwrProfSharedMemOps.c b/src/PwrProfSharedMemOps.c
index 4f457c0..5d2e09c 100644
--- a/src/PwrProfSharedMemOps.c
+++ b/src/PwrProfSharedMemOps.c
@@ -153,7 +153,9 @@ static void pp_anon_inode_mmap_close(struct vm_area_struct* vma)
     return;
 }
 
-#if LINUX_VERSION_CODE >= KERNEL_VERSION(4, 11, 0)
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(5, 1, 0)
+    static vm_fault_t pp_anon_inode_mmap_fault(struct vm_fault *vmf)
+#elif LINUX_VERSION_CODE >= KERNEL_VERSION(4, 11, 0)
     static int pp_anon_inode_mmap_fault(struct vm_fault* vmf)
 #else
     static int pp_anon_inode_mmap_fault(struct vm_area_struct* vma, struct vm_fault* vmf)
