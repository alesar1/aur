_install_completions() {
  tmpdir=$(mktemp -d)

  _GITLINT_COMPLETE=bash_source gitlint > "$tmpdir/gitlint.bash"
  _GITLINT_COMPLETE=fish_source gitlint > "$tmpdir/gitlint.fish"
  _GITLINT_COMPLETE=zsh_source gitlint > "$tmpdir/gitlint.zsh"

  install -Dm644 "$tmpdir/gitlint.bash" "/usr/share/bash-completion/completions/gitlint"
  install -Dm644 "$tmpdir/gitlint.fish" "/usr/share/fish/vendor_completions.d/gitlint.fish"
  install -Dm644 "$tmpdir/gitlint.zsh" "/usr/share/zsh/site-functions/_gitlint"
}

post_install() {
  _install_completions
}

post_upgrade() {
  _install_completions
}

post_remove() {
  rm "/usr/share/bash-completion/completions/gitlint"
  rm "/usr/share/fish/vendor_completions.d/gitlint.fish"
  rm "/usr/share/zsh/site-functions/_gitlint"
}
