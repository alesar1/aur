diff --git a/CMakeLists.txt b/CMakeLists.txt
index 25c7bc7..b4dac53 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -44,8 +44,7 @@ endif()
 include_directories(
   ${PROJECT_SOURCE_DIR}/generated/
   ${PROJECT_SOURCE_DIR}/third_party/
-  ${PROJECT_SOURCE_DIR}/third_party/yaml-cpp/include
-  ${PROJECT_SOURCE_DIR}/third_party/antlr4/runtime/Cpp/runtime/src
+  /usr/include/antlr4-runtime
   ${PROJECT_SOURCE_DIR}/src/
   )
 
@@ -59,17 +58,6 @@ set(src_dir
   ${PROJECT_SOURCE_DIR}/generated/LuaBaseVisitor.cpp
 )
 
-file(GLOB_RECURSE antlr4-cpp-src 
-   ${PROJECT_SOURCE_DIR}/third_party/antlr4/runtime/Cpp/runtime/src/*.cpp
-)
-
-file(GLOB_RECURSE yaml-cpp-src 
-   ${PROJECT_SOURCE_DIR}/third_party/yaml-cpp/src/*.cpp
-)
-
-add_library (antlr4-cpp-runtime ${antlr4-cpp-src})
-add_library (yaml-cpp ${yaml-cpp-src})
-
 add_executable(lua-format ${src_dir} src/main.cpp)
 
 if(WIN32)
@@ -79,7 +67,7 @@ endif()
 
 set_target_properties(lua-format PROPERTIES LINKER_LANGUAGE CXX)
 
-target_link_libraries(lua-format yaml-cpp antlr4-cpp-runtime)
+target_link_libraries(lua-format yaml-cpp antlr4-runtime)
 
 install(TARGETS lua-format
   RUNTIME DESTINATION bin
diff --git a/src/main.cpp b/src/main.cpp
index e7b9f36..f0a7f45 100644
--- a/src/main.cpp
+++ b/src/main.cpp
@@ -49,6 +49,24 @@ int main(int argc, const char* argv[]) {
             if (candidate.filename() == ".lua-format") configFileName = candidate.string();
         }
     }
+    // try xdg config
+    if (configFileName.empty()) {
+        char* substitute = getenv("XDG_CONFIG_HOME");
+        if (substitute == NULL) {
+            substitute = getenv("HOME");
+            if (substitute != NULL) {
+                configFileName = string(substitute) + "/.config";
+            }
+        } else {
+            configFileName = string(substitute);
+        }
+        if (!configFileName.empty()) {
+            configFileName = configFileName + "/lua-format/config";
+            if (!fs::exists(configFileName)) {
+                configFileName = "";
+            }
+        }
+    }
 
     if (configFileName.empty()) {
         if (verbose) cerr << "using default configuration" << endl;
