From aa7445805211b6f616614647159a71ae9df3ab03 Mon Sep 17 00:00:00 2001
From: Emmanuel Anne <emmanuel.anne@gmail.com>
Date: Wed, 9 Apr 2014 22:10:55 +0200
Subject: [PATCH 4/5] use pkg-config for dvdnav

---
 configure |   14 +++++---------
 1 file changed, 5 insertions(+), 9 deletions(-)

diff --git a/configure b/configure
index 60fd308..bd09607 100755
--- a/configure
+++ b/configure
@@ -543,7 +543,6 @@ _xmms=no
 _vcd=auto
 _bluray=auto
 _dvdnav=auto
-_dvdnavconfig=dvdnav-config
 _dvdreadconfig=dvdread-config
 _dvdread=auto
 _dvdread_internal=auto
@@ -654,9 +653,6 @@ for ac_option do
   --with-sdl-config=*)
     _sdlconfig=$(echo $ac_option | cut -d '=' -f 2)
     ;;
-  --with-dvdnav-config=*)
-    _dvdnavconfig=$(echo $ac_option | cut -d '=' -f 2)
-    ;;
   --with-dvdread-config=*)
     _dvdreadconfig=$(echo $ac_option | cut -d '=' -f 2)
     ;;
@@ -5190,13 +5186,13 @@ if test "$_dvdnav" = auto ; then
     dvdnav_internal=yes
     res_comment="internal"
   else
-    $_dvdnavconfig --version --minilibs >> $TMPLOG 2>&1 || _dvdnav=no
+    pkg-config dvdnavmini --libs >> $TMPLOG 2>&1 || _dvdnav=no
   fi
 fi
 if test "$_dvdnav" = auto ; then
   _dvdnav=no
-  _dvdnavdir=$($_dvdnavconfig --cflags)
-  _dvdnavlibs=$($_dvdnavconfig --libs)
+  _dvdnavdir=$(pkg-config dvdnav --cflags)
+  _dvdnavlibs=$(pkg-config dvdnav --libs)
   statement_check_broken stdint.h dvdnav/dvdnav.h 'dvdnav_t *dvd = 0' $_dvdnavdir $_dvdnavlibs $_ld_dl $_ld_pthread && _dvdnav=yes
 fi
 if test "$_dvdnav" = yes ; then
@@ -5205,8 +5201,8 @@ if test "$_dvdnav" = yes ; then
     cflags_libdvdnav="-Ilibdvdnav"
     inputmodules="dvdnav(internal) $inputmodules"
   else
-    extra_cflags="$extra_cflags $($_dvdnavconfig --cflags)"
-    extra_ldflags="$extra_ldflags $($_dvdnavconfig --minilibs)"
+    extra_cflags="$extra_cflags $(pkg-config dvdnav --cflags)"
+    extra_ldflags="$extra_ldflags $(pkg-config dvdnavmini --libs)"
     inputmodules="dvdnav $inputmodules"
   fi
 else
-- 
1.7.10.4

