#!/bin/sh
### ====================================================================== ###
##                                                                          ##
##  SoapUI Bootstrap Script                                                 ##
##                                                                          ##
### ====================================================================== ###

### $Id$ ###
DIRNAME=$(dirname $0)

# Setup SOAPUI_HOME
SOAPUI_HOME=/usr/share/soapui
export SOAPUI_HOME

SOAPUI_CLASSPATH="$SOAPUI_HOME/bin/soapui-#SOAPUIVER#.jar:$SOAPUI_HOME/lib/*"

export SOAPUI_CLASSPATH

JAVA_OPTS="-Xms128m -Xmx1024m -XX:MinHeapFreeRatio=20 -XX:MaxHeapFreeRatio=40 -Dsoapui.properties=soapui.properties -Dsoapui.home=$SOAPUI_HOME/bin -splash:SoapUI-Spashscreen.png"
JAVA_OPTS="$JAVA_OPTS -Dawt.useSystemAAFontSettings=on -Duser.home=$HOME/.soapuios/ -Dsoapui.logroot=$HOME/.soapuios/"
JFXRTPATH=$(${JAVA_HOME}/bin/java -cp $SOAPUI_CLASSPATH com.eviware.soapui.tools.JfxrtLocator)
SOAPUI_CLASSPATH=$JFXRTPATH:$SOAPUI_CLASSPATH


if [ $SOAPUI_HOME != "" ] 
then
    JAVA_OPTS="$JAVA_OPTS -Dsoapui.ext.libraries=$SOAPUI_HOME/bin/ext"
    JAVA_OPTS="$JAVA_OPTS -Dsoapui.ext.listeners=$SOAPUI_HOME/bin/listeners"
    JAVA_OPTS="$JAVA_OPTS -Dsoapui.ext.actions=$SOAPUI_HOME/bin/actions"
    JAVA_OPTS="$JAVA_OPTS -Djava.library.path=$SOAPUI_HOME/bin"
    JAVA_OPTS="$JAVA_OPTS -Dwsi.dir=$SOAPUI_HOME/wsi-test-tools"
#uncomment to disable browser component
#   JAVA_OPTS="$JAVA_OPTS -Dsoapui.browser.disabled=true"
fi

export JAVA_OPTS

cd $DIRNAME
echo ================================
echo =
echo = SOAPUI_HOME = $SOAPUI_HOME
echo =
echo ================================

"${JAVA_HOME}/bin/java" ${JAVA_OPTS} -cp ${SOAPUI_CLASSPATH} com.eviware.soapui.SoapUI "$@"
