<VirtualHost *:80>
    ServerName ssp.sparchatus.ch
    DocumentRoot /usr/share/webapps/self-service-password
 
    LogLevel warn
    ErrorLog /var/log/httpd/ssp_error.log
    CustomLog /var/log/httpd/ssp_access.log combined

    RewriteEngine on
    RewriteCond %{SERVER_NAME} =ssp.sparchatus.ch
    RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent]
</VirtualHost>

<VirtualHost *:443>
    ServerName ssp.sparchatus.ch
    DocumentRoot /usr/share/webapps/self-service-password
 
    AddDefaultCharset UTF-8

    <Directory /usr/share/webapps/self-service-password/>
        AllowOverride None
	Require all granted
        DirectoryIndex index.php
    </Directory>
 
    <Directory /usr/share/webapps/self-service-password/scripts/>
        AllowOverride None
        Require all denied
    </Directory>
 
    LogLevel warn
    ErrorLog /var/log/httpd/ssp_error.log
    CustomLog /var/log/httpd/ssp_access.log combined

    SSLCertificateFile /etc/letsencrypt/live/ssp.sparchatus.ch/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/ssp.sparchatus.ch/privkey.pem
    Include /etc/letsencrypt/options-ssl-apache.conf
</VirtualHost>
