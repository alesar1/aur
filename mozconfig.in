# general build setup
mk_add_options PYTHON=/usr/bin/python2
ac_add_options --enable-official-branding
export MOZILLA_OFFICIAL=1
export CC=gcc
export CXX=g++

# number of cores your processor has
mk_add_options MOZ_MAKE_FLAGS="-j8" 

# not necessary if using firejail
mk_add_options _FORTIFY_SOURCE=0 

# march=native and O2 should be about as extreme as you'll ever need
ac_add_options --enable-optimize="-O2 -march=native"

# strip debugging symbols
ac_add_options --enable-strip

# library and chrome format
ac_add_options --enable-chrome-format=omni
ac_add_options --x-libraries=/usr/lib

# the below options set palemoon to use ~/.palemoon instead of ~/.moonchild productions
#ac_add_options --with-distribution-id=Palemoon
#ac_add_options --with-user-appdir=.palemoon
#export MOZ_APP_PROFILE=palemoon
#mk_add_options MOZ_APP_PROFILE=palemoon

# Use System libraries
#ac_add_options --enable-default-toolkit=cairo-gtk3 # breaks the build, gtk3 support is not ready
#ac_add_options --with-system-nss # build stops and informs us that system nss is not currently supported
ac_add_options --enable-system-cairo # system cairo may result in choppy video playback without layer acceleration
ac_add_options --with-system-nspr
ac_add_options --with-system-jpeg
ac_add_options --with-system-zlib
ac_add_options --with-system-bz2
ac_add_options --with-system-png
ac_add_options --with-system-libevent
ac_add_options --with-system-libvpx
ac_add_options --with-system-icu
ac_add_options --with-system-webp
ac_add_options --enable-system-hunspell
ac_add_options --enable-system-sqlite
ac_add_options --enable-system-ffi
ac_add_options --enable-system-pixman

mk_add_options MOZ_CO_PROJECT=browser
ac_add_options --enable-application=browser

mk_add_options MOZ_OBJDIR=%SRCDIR%/pmbuild

# Safe browsing doesn't apparently leak data about you, it can stay on
ac_add_options --enable-safe-browsing
ac_add_options --enable-url-classifier

# Disable geolocation web services
ac_add_options --disable-necko-wifi

# Disable webrtc (I think this is actually removed in palemoon)
ac_add_options --disable-webrtc

# Disable contacting anyone about anything (also removed in palemoon)
ac_add_options --disable-crashreporter
ac_add_options --disable-updater
ac_add_options --disable-tests

# Also removed in palemoon
ac_add_options --disable-accessibility

# Features
ac_add_options --enable-startup-notification
ac_add_options --enable-pulseaudio

# You want to use gstreamer, or else h.264 html5 videos will not play
ac_add_options --enable-gstreamer

# disable stuff we probably don't need or want
ac_add_options --disable-parental-controls
ac_add_options --disable-gamepad
ac_add_options --disable-logging
ac_add_options --disable-installer
ac_add_options --disable-updater
ac_add_options --disable-websms-backend
ac_add_options --disable-windows-mobile-components
ac_add_options --disable-metro
ac_add_options --disable-maintenance-service
ac_add_options --disable-mobile-optimize
ac_add_options --disable-codesighs
ac_add_options --disable-b2g-ril
ac_add_options --disable-b2g-bt
ac_add_options --disable-b2g-camera
ac_add_options --disable-mochitests
ac_add_options --disable-debug
ac_add_options --disable-debug-symbols
