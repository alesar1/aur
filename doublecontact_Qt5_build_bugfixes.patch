From 4268b1b3754e1ee9bab3f18e1d94b378d312a51f Mon Sep 17 00:00:00 2001
From: zv <zv@dhbook.local>
Date: Fri, 3 May 2019 17:32:41 +0300
Subject: [PATCH] Qt5 build bugfixes

---
 app/doublecontact.pro             | 9 +++++----
 core/formats/common/vcarddata.cpp | 2 +-
 2 files changed, 6 insertions(+), 5 deletions(-)

diff --git a/app/doublecontact.pro b/app/doublecontact.pro
index d94dee6..a2ee33f 100644
--- a/app/doublecontact.pro
+++ b/app/doublecontact.pro
@@ -74,13 +74,14 @@ win32 {
 tr.commands = lrelease \
     $$_PRO_FILE_
 }
-unix&&!macx {
-tr.commands = lrelease-qt5 \
+unix {
+macx {
+tr.commands = lrelease \
     $$_PRO_FILE_
 } else {
-tr.commands = lrelease \
+tr.commands = lrelease-qt5 \
     $$_PRO_FILE_
-
+}
 }
 } else {
 tr.commands = lrelease \
diff --git a/core/formats/common/vcarddata.cpp b/core/formats/common/vcarddata.cpp
index c2c5f12..e2e621f 100644
--- a/core/formats/common/vcarddata.cpp
+++ b/core/formats/common/vcarddata.cpp
@@ -543,7 +543,7 @@ void VCardData::importAddress(PostalAddress &item, const QStringList& aTypes, co
 QStringList VCardData::splitBySC(const QString &src)
 {
 #if QT_VERSION >= 0x050000
-    return QRegularExpression("(?<!\\\\);")).replaceInStrings("\\;", ";");
+    return src.split(QRegularExpression("(?<!\\\\);")).replaceInStrings("\\;", ";");
 #else
     QStringList res = src.split(";");
     // TODO m.b. after DC 1.0 port this to C++11
