#%Module1.0
#
# Created by Darjan Krijan <darjan_krijan@gmx.de>
#

set MODULE   "aocc"
set BASE_DIR "/opt"
set VERSION  "3.0.0"
set MODULE_ROOT "${BASE_DIR}/${MODULE}"
set MODULE_TEXT "AMD Optimizing C/C++ Compiler and Fortran Compiler (flang)"

prepend-path PATH            ${MODULE_ROOT}/bin
prepend-path LIBRARY_PATH    ${MODULE_ROOT}/lib32
prepend-path LIBRARY_PATH    ${MODULE_ROOT}/lib
prepend-path LD_LIBRARY_PATH ${MODULE_ROOT}/lib32
prepend-path LD_LIBRARY_PATH ${MODULE_ROOT}/lib
append-path  CPATH           ${MODULE_ROOT}/include
prepend-path MANPATH         ${MODULE_ROOT}/share/man

setenv       CC              ${MODULE_ROOT}/bin/aocc-clang
setenv       OMPI_CC         ${MODULE_ROOT}/bin/aocc-clang
setenv       CXX             ${MODULE_ROOT}/bin/aocc-clang++
setenv       OMPI_CXX        ${MODULE_ROOT}/bin/aocc-clang++
setenv       FC              ${MODULE_ROOT}/bin/aocc-flang
setenv       F77             ${MODULE_ROOT}/bin/aocc-flang
setenv       F90             ${MODULE_ROOT}/bin/aocc-flang
setenv       OMPI_FC         ${MODULE_ROOT}/bin/aocc-flang

module-whatis "${MODULE_TEXT} version ${VERSION}"

proc ModulesHelp {} {
	global MODULE_TEXT
	puts stderr "This module sets up the environment for ${MODULE_TEXT}"
	puts stderr "by adapting the following environment variables:"
	puts stderr "PATH"
	puts stderr "LIBRARY_PATH"
	puts stderr "LD_LIBRARY_PATH"
	puts stderr "CPATH"
	puts stderr "CC, CXX, FC, F77, F90"
	puts stderr "OMPI_CC, OMPI_CXX, OMPI_FC"
}
