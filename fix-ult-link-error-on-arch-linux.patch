From d95d8f7ab7ac94a2e0f4ee6a4b4794898dc2d3b7 Mon Sep 17 00:00:00 2001
From: "weizhi_(walter)__bai" <walter.bai@intel.com>
Date: Fri, 30 Mar 2018 09:28:45 +0800
Subject: [PATCH] [Linux ULT] Fix ULT link error on Arch Linux.(CL#753129)

Change-Id: I2f12d3873674c39b69d6f3bb5fabc33765dfea10
---
 media_driver/linux/ult/CMakeLists.txt | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/media_driver/linux/ult/CMakeLists.txt b/media_driver/linux/ult/CMakeLists.txt
index 3de94ad..4d57001 100644
--- a/media_driver/linux/ult/CMakeLists.txt
+++ b/media_driver/linux/ult/CMakeLists.txt
@@ -19,6 +19,10 @@
 # OTHER DEALINGS IN THE SOFTWARE.
 cmake_minimum_required(VERSION 3.1)
 
+#-fno-plt is a GCC option to disable the use of PLT for external function calls in position-independent code.
+#This option is by default enabled on some Linux distributions such as Arch Linux, which can cause link error.
+string(REPLACE "-fno-plt" "" CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS}")
+
 add_compile_options(-std=c++11)
 
 include(${MEDIA_DRIVER_CMAKE}/linux/media_feature_flags_linux.cmake)
