From 072d129f542d60bfdc34efd882eb24e88131d99c Mon Sep 17 00:00:00 2001
From: tytan652 <tytan652@tytanium.xyz>
Date: Tue, 2 Feb 2021 21:48:17 +0100
Subject: [PATCH] ui: Don't reference Updater if it's been disabled

Merges #446
---
 source/ui/ui.cpp | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

diff --git a/source/ui/ui.cpp b/source/ui/ui.cpp
index 78876eb5..d6034f4c 100644
--- a/source/ui/ui.cpp
+++ b/source/ui/ui.cpp
@@ -80,7 +80,11 @@ streamfx::ui::handler::handler()
 
 	  _about_action(), _about_dialog(),
 
-	  _translator(), _updater()
+	  _translator()
+#ifdef ENABLE_UPDATER
+	  ,
+	  _updater()
+#endif
 {
 	obs_frontend_add_event_callback(frontend_event_handler, this);
 }
@@ -169,7 +173,10 @@ void streamfx::ui::handler::on_obs_loaded()
 	}
 
 	// Let the Updater start its work.
+
+#ifdef ENABLE_UPDATER
 	this->_updater->obs_ready();
+#endif
 }
 
 void streamfx::ui::handler::on_obs_exit()
