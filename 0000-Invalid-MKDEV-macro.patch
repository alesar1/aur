--- nslinkd.c.orig	2018-01-05 11:01:23.000000000 -0500
+++ nslinkd.c	2018-06-18 18:06:27.399852118 -0400
@@ -40,10 +40,11 @@
 #include <netinet/tcp.h>
 #include <arpa/inet.h>
 #include <netpacket/packet.h>
 #include <net/if.h>
 #include <netdb.h>
+#include <linux/kdev_t.h>
 
 #include "nslink.h"
 #include "nslinkd.h"
 #include "version.h"
 
@@ -216,11 +217,10 @@ static void put_pid_file()
 
 /*
  * Create a device if it doesn't exist and have the correct device
  * number or major/minor number.
  */
-#define MKDEV(a,b) ((int)((((a) & 0xff) << 8) | ((b) & 0xff)))
 
 
 static void create_device(const char *prefix, int major, int num, gid_t def_group)
 {
         char name[80];
