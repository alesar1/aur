From 62db15a6c4cc3bbee9fd35e85bd0c6c5fe5ae98b Mon Sep 17 00:00:00 2001
From: Fabian Greffrath <fabian@greffrath.com>
Date: Thu, 7 Jan 2021 10:18:31 +0100
Subject: [PATCH 3/3] force status bar refresh in the Main, Episode and Skill
 menus

Thanks @JNechaevsky.

https://github.com/JNechaevsky/russian-doom/commit/968b7844d8cb8623683024345187c503b66ed806
---
 src/doom/m_menu.c | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/src/doom/m_menu.c b/src/doom/m_menu.c
index 3e21f1be..0978ce3a 100644
--- a/src/doom/m_menu.c
+++ b/src/doom/m_menu.c
@@ -1236,6 +1236,9 @@ void M_MusicVol(int choice)
 //
 void M_DrawMainMenu(void)
 {
+    // [crispy] force status bar refresh
+    inhelpscreens = true;
+
     V_DrawPatchDirect(94, 2,
                       W_CacheLumpName(DEH_String("M_DOOM"), PU_CACHE));
 }
@@ -1248,6 +1251,9 @@ void M_DrawMainMenu(void)
 //
 void M_DrawNewGame(void)
 {
+    // [crispy] force status bar refresh
+    inhelpscreens = true;
+
     V_DrawPatchDirect(96, 14, W_CacheLumpName(DEH_String("M_NEWG"), PU_CACHE));
     V_DrawPatchDirect(54, 38, W_CacheLumpName(DEH_String("M_SKILL"), PU_CACHE));
 }
@@ -1282,6 +1288,9 @@ int     epi;
 
 void M_DrawEpisode(void)
 {
+    // [crispy] force status bar refresh
+    inhelpscreens = true;
+
     V_DrawPatchDirect(54, 38, W_CacheLumpName(DEH_String("M_EPISOD"), PU_CACHE));
 }
 
-- 
2.30.0

