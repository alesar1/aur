diff --git a/lib/schleuder/gpgme/ctx.rb b/lib/schleuder/gpgme/ctx.rb
index 295f4de..0011112 100644
--- a/lib/schleuder/gpgme/ctx.rb
+++ b/lib/schleuder/gpgme/ctx.rb
@@ -211,7 +211,7 @@ module GPGME
       errors = []
       output = []
       base_cmd = gpg_engine.file_name
-      base_args = '--no-greeting --no-permission-warning --quiet --armor --trust-model always --no-tty --command-fd 0 --status-fd 1'
+      base_args = '--no-greeting --quiet --armor --trust-model always --no-tty --command-fd 0 --status-fd 1'
       cmd = [base_cmd, base_args, args].flatten.join(' ')
       Open3.popen3(cmd) do |stdin, stdout, stderr, thread|
         if block_given?
@@ -224,6 +224,16 @@ module GPGME
         exitcode = thread.value.exitstatus
       end
 
+      # Don't treat warnings as errors but log them.
+      errors = errors.map do |line|
+        if line.match?(/gpg: WARNING: (unsafe permissions on homedir|using insecure memory)/i)
+          Schleuder.logger.warn(line)
+          nil
+        else
+          line
+        end
+      end.compact
+
       [errors, output, exitcode]
     rescue Errno::ENOENT
       raise 'Need gpg in $PATH or in $GPGBIN'
diff --git a/spec/schleuder/integration/cli_spec.rb b/spec/schleuder/integration/cli_spec.rb
index 9dccf8e..e0fd441 100644
--- a/spec/schleuder/integration/cli_spec.rb
+++ b/spec/schleuder/integration/cli_spec.rb
@@ -8,6 +8,9 @@ describe 'cli' do
       list.import_key(File.read('spec/fixtures/expired_key.txt'))
       list.import_key(File.read('spec/fixtures/olduid_key.txt'))
 
+      dirmngr_conf = "#{list.listdir}/dirmngr.conf"
+      `printf "no-use-tor\nstandard-resolver" >> "#{dirmngr_conf}"`
+
       with_sks_mock(list.listdir) do
         Cli.new.refresh_keys
         dirmngr_pid = `pgrep -a dirmngr | grep #{list.listdir}`.split(' ', 2).first
@@ -31,6 +34,9 @@ describe 'cli' do
         list.import_key(File.read('spec/fixtures/olduid_key.txt'))
       end
 
+      dirmngr_conf = "#{list1.listdir}/dirmngr.conf"
+      `printf "no-use-tor\nstandard-resolver" >> "#{dirmngr_conf}"`
+
       with_sks_mock(list1.listdir) do
         Cli.new.refresh_keys list1.email
       end
diff --git a/spec/schleuder/integration/keywords_spec.rb b/spec/schleuder/integration/keywords_spec.rb
index 27ced63..4943dde 100644
--- a/spec/schleuder/integration/keywords_spec.rb
+++ b/spec/schleuder/integration/keywords_spec.rb
@@ -1276,6 +1276,9 @@ describe 'user sends keyword' do
     encrypted_mail = Mail::TestMailer.deliveries.first
     Mail::TestMailer.deliveries.clear
 
+    dirmngr_conf = "#{list.listdir}/dirmngr.conf"
+    `printf "no-use-tor\nstandard-resolver" >> "#{dirmngr_conf}"`
+
     with_sks_mock(list.listdir) do
       begin
         Schleuder::Runner.new().run(encrypted_mail.to_s, list.request_address)
@@ -1312,6 +1315,9 @@ describe 'user sends keyword' do
     encrypted_mail = Mail::TestMailer.deliveries.first
     Mail::TestMailer.deliveries.clear
 
+    dirmngr_conf = "#{list.listdir}/dirmngr.conf"
+    `printf "no-use-tor\nstandard-resolver" >> "#{dirmngr_conf}"`
+
     with_sks_mock(list.listdir) do
       begin
         Schleuder::Runner.new().run(encrypted_mail.to_s, list.request_address)
@@ -1348,6 +1354,9 @@ describe 'user sends keyword' do
     encrypted_mail = Mail::TestMailer.deliveries.first
     Mail::TestMailer.deliveries.clear
 
+    dirmngr_conf = "#{list.listdir}/dirmngr.conf"
+    `printf "no-use-tor\nstandard-resolver" >> "#{dirmngr_conf}"`
+
     with_sks_mock(list.listdir) do
       begin
         Schleuder::Runner.new().run(encrypted_mail.to_s, list.request_address)
@@ -1385,6 +1394,9 @@ describe 'user sends keyword' do
     encrypted_mail = Mail::TestMailer.deliveries.first
     Mail::TestMailer.deliveries.clear
 
+    dirmngr_conf = "#{list.listdir}/dirmngr.conf"
+    `printf "no-use-tor\nstandard-resolver" >> "#{dirmngr_conf}"`
+
     with_sks_mock(list.listdir) do
       begin
         Schleuder::Runner.new().run(encrypted_mail.to_s, list.request_address)
@@ -1421,6 +1433,9 @@ describe 'user sends keyword' do
     encrypted_mail = Mail::TestMailer.deliveries.first
     Mail::TestMailer.deliveries.clear
 
+    dirmngr_conf = "#{list.listdir}/dirmngr.conf"
+    `printf "no-use-tor\nstandard-resolver" >> "#{dirmngr_conf}"`
+
     with_sks_mock(list.listdir) do
       begin
         Schleuder::Runner.new().run(encrypted_mail.to_s, list.request_address)
@@ -1457,6 +1472,9 @@ describe 'user sends keyword' do
     encrypted_mail = Mail::TestMailer.deliveries.first
     Mail::TestMailer.deliveries.clear
 
+    dirmngr_conf = "#{list.listdir}/dirmngr.conf"
+    `printf "no-use-tor\nstandard-resolver" >> "#{dirmngr_conf}"`
+
     with_sks_mock(list.listdir) do
       begin
         Schleuder::Runner.new().run(encrypted_mail.to_s, list.request_address)
@@ -1493,6 +1511,9 @@ describe 'user sends keyword' do
     encrypted_mail = Mail::TestMailer.deliveries.first
     Mail::TestMailer.deliveries.clear
 
+    dirmngr_conf = "#{list.listdir}/dirmngr.conf"
+    `printf "no-use-tor\nstandard-resolver" >> "#{dirmngr_conf}"`
+
     with_sks_mock(list.listdir) do
       begin
         Schleuder::Runner.new().run(encrypted_mail.to_s, list.request_address)
@@ -1529,6 +1550,9 @@ describe 'user sends keyword' do
     encrypted_mail = Mail::TestMailer.deliveries.first
     Mail::TestMailer.deliveries.clear
 
+    dirmngr_conf = "#{list.listdir}/dirmngr.conf"
+    `printf "no-use-tor\nstandard-resolver" >> "#{dirmngr_conf}"`
+
     with_sks_mock(list.listdir) do
       begin
         Schleuder::Runner.new().run(encrypted_mail.to_s, list.request_address)
diff --git a/spec/schleuder/unit/gpgme_ctx_spec.rb b/spec/schleuder/unit/gpgme_ctx_spec.rb
index 288fd70..677756b 100644
--- a/spec/schleuder/unit/gpgme_ctx_spec.rb
+++ b/spec/schleuder/unit/gpgme_ctx_spec.rb
@@ -189,6 +189,9 @@ describe GPGME::Ctx do
       list.import_key(File.read('spec/fixtures/expired_key.txt'))
       list.import_key(File.read('spec/fixtures/olduid_key.txt'))
 
+      dirmngr_conf = "#{list.listdir}/dirmngr.conf"
+      `printf "no-use-tor\nstandard-resolver" >> "#{dirmngr_conf}"`
+
       res = ''
       with_sks_mock(list.listdir) do
         res = list.gpg.refresh_keys(list.keys)
@@ -202,6 +205,9 @@ describe GPGME::Ctx do
       list.subscribe('admin@example.org', nil, true)
       list.import_key(File.read('spec/fixtures/expired_key.txt'))
 
+      dirmngr_conf = "#{list.listdir}/dirmngr.conf"
+      `printf "no-use-tor\nstandard-resolver" >> "#{dirmngr_conf}"`
+
       res = list.gpg.refresh_keys(list.keys)
 
       expect(res).to match(/keyserver refresh failed: Connection refused/)
@@ -213,6 +219,9 @@ describe GPGME::Ctx do
       list.subscribe('admin@example.org', nil, true)
       list.import_key(File.read('spec/fixtures/bla_foo_key.txt'))
 
+      dirmngr_conf = "#{list.listdir}/dirmngr.conf"
+      `printf "no-use-tor\nstandard-resolver" >> "#{dirmngr_conf}"`
+
       res = ''
       with_sks_mock(list.listdir) do
         res = list.gpg.refresh_keys(list.keys)
diff --git a/spec/schleuder/unit/list_spec.rb b/spec/schleuder/unit/list_spec.rb
index 69792c2..7e8c312 100644
--- a/spec/schleuder/unit/list_spec.rb
+++ b/spec/schleuder/unit/list_spec.rb
@@ -514,6 +514,9 @@ describe Schleuder::List do
       list.subscribe('admin@example.org', nil, true)
       output = ''
 
+      dirmngr_conf = "#{list.listdir}/dirmngr.conf"
+      `printf "no-use-tor\nstandard-resolver" >> "#{dirmngr_conf}"`
+
       with_sks_mock(list.listdir) do
         output = list.fetch_keys('98769E8A1091F36BD88403ECF71A3F8412D83889')
       end
@@ -528,6 +531,9 @@ describe Schleuder::List do
       list.subscribe('admin@example.org', nil, true)
       output = ''
 
+      dirmngr_conf = "#{list.listdir}/dirmngr.conf"
+      `printf "no-use-tor\nstandard-resolver" >> "#{dirmngr_conf}"`
+
       with_sks_mock(list.listdir) do
         output = list.fetch_keys('http://localhost:9999/keys/example.asc')
       end
@@ -542,6 +548,9 @@ describe Schleuder::List do
       list.subscribe('admin@example.org', nil, true)
       output = ''
 
+      dirmngr_conf = "#{list.listdir}/dirmngr.conf"
+      `printf "no-use-tor\nstandard-resolver" >> "#{dirmngr_conf}"`
+
       with_sks_mock(list.listdir) do
         output = list.fetch_keys('admin@example.org')
       end
@@ -557,6 +566,9 @@ describe Schleuder::List do
       list.subscribe('admin@example.org', nil, true)
       output = ''
 
+      dirmngr_conf = "#{list.listdir}/dirmngr.conf"
+      `printf "no-use-tor\nstandard-resolver" >> "#{dirmngr_conf}"`
+
       with_sks_mock(list.listdir) do
         output = list.fetch_keys('87E65ED2081AE3D16BE4F0A5EBDBE899251F2412')
       end
diff --git a/spec/sks-mock.rb b/spec/sks-mock.rb
index 3260e7f..4c30143 100755
--- a/spec/sks-mock.rb
+++ b/spec/sks-mock.rb
@@ -5,7 +5,6 @@ require 'sinatra/base'
 class SksMock < Sinatra::Base
   set :environment, :production
   set :port, 9999
-  set :bind, 'localhost'
 
   get '/status' do
     'ok'
