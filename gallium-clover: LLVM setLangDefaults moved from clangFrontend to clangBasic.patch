From 48185c3b8244d730a4de7c628e715cea71313870 Mon Sep 17 00:00:00 2001
From: Thomas Debesse <dev@illwieckz.net>
Date: Mon, 18 Apr 2022 04:21:02 +0200
Subject: [PATCH] gallium/clover: LLVM setLangDefaults moved from clangFrontend
 to clangBasic

---
 src/gallium/frontends/clover/llvm/compat.hpp | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/src/gallium/frontends/clover/llvm/compat.hpp b/src/gallium/frontends/clover/llvm/compat.hpp
index 8c369b2cac90..1127a397fde1 100644
--- a/src/gallium/frontends/clover/llvm/compat.hpp
+++ b/src/gallium/frontends/clover/llvm/compat.hpp
@@ -102,7 +102,11 @@ namespace clover {
                                     clang::InputKind ik, const ::llvm::Triple& triple,
                                     clang::LangStandard::Kind d)
          {
+#if LLVM_VERSION_MAJOR >= 15
+            c->getLangOpts().setLangDefaults(c->getLangOpts(), ik.getLanguage(), triple,
+#else
             c->getInvocation().setLangDefaults(c->getLangOpts(), ik, triple,
+#endif
 #if LLVM_VERSION_MAJOR >= 12
                                                c->getPreprocessorOpts().Includes,
 #else
-- 
GitLab

