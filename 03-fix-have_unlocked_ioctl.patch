diff --git a/blackmagic-11.6a26/blackmagic_core.c b/blackmagic-11.6a26/blackmagic_core.c
index 2acbdd6..8d4f332 100644
--- a/blackmagic-11.6a26/blackmagic_core.c
+++ b/blackmagic-11.6a26/blackmagic_core.c
@@ -41,6 +41,12 @@
 
 #include "blackmagic_core.h"
 
+
+/* HAVE_UNLOCKED_IOCTL has been removed in kernel 5.9 */
+#if KERNEL_VERSION_OR_LATER(5, 9, 0)
+# define HAVE_UNLOCKED_IOCTL 1
+#endif
+
 unsigned long blackmagic_flags = 0;
 module_param(blackmagic_flags, ulong, S_IRUGO | S_IWUSR);
 
