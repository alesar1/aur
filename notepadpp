#!/usr/bin/env sh

wineapp="notepadpp"

pkgdir="/usr/share/$wineapp"
localdir="$HOME/.local/share/$wineapp"

unset WINEPREFIX

if [ ! -d "$localdir" ] ; then
    mkdir -p "$localdir"

    cp -rs "$pkgdir/plugins" "$localdir/plugins"
    cp -rs "$pkgdir/themes" "$localdir/themes"
    cp -rs "$pkgdir/localization" "$localdir/localization"

    cp -r "$pkgdir/contextMenu.xml" "$localdir/contextMenu.xml"
    cp -r "$pkgdir/doLocalConf.xml" "$localdir/doLocalConf.xml"
    cp -r "$pkgdir/functionList.xml" "$localdir/functionList.xml"
    cp -r "$pkgdir/langs.model.xml" "$localdir/langs.model.xml"
    cp -r "$pkgdir/shortcuts.xml" "$localdir/shortcuts.xml"
    cp -r "$pkgdir/stylers.model.xml" "$localdir/stylers.model.xml"

    ln -s "$pkgdir/notepad++.exe" "$localdir/notepadpp"
    ln -s "$pkgdir/SciLexer.dll" "$localdir/SciLexer.dll"

    ln -s "$pkgdir/change.log" "$localdir/change.log"
    ln -s "$pkgdir/readme.txt" "$localdir/readme.txt"
fi

WINEDEBUG=-all wine "$HOME/.local/share/notepadpp/notepadpp" "$@"

