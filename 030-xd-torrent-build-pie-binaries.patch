commit 0b3eb302d13fbd2c508ae2eba9374e8427ba1cc0
Author: Daniel Bermond <danielbermond@gmail.com>
Date:   Mon May 4 13:50:24 2020 +0000

    Makefile: build PIE binaries
    
    Signed-off-by: Daniel Bermond <danielbermond@gmail.com>

diff --git a/Makefile b/Makefile
index 10b0e2d..ff9bda4 100644
--- a/Makefile
+++ b/Makefile
@@ -51,16 +51,16 @@ build: $(CLI)
 assets: $(ASSETS)
 
 $(GO_ASSETS):
-	GOPATH=$(REPO) $(GO) build -trimpath -ldflags "-extldflags ${LDFLAGS}" -o $(GO_ASSETS) -v github.com/jessevdk/go-assets-builder
+	GOPATH=$(REPO) $(GO) build -buildmode=pie -trimpath -ldflags "-extldflags ${LDFLAGS}" -o $(GO_ASSETS) -v github.com/jessevdk/go-assets-builder
 
 $(ASSETS): $(GO_ASSETS) $(WEBUI_CORE)
 	$(GO_ASSETS) -p assets -s $(WEBUI_PREFIX) -o $(ASSETS) $(WEB_FILES)
 
 $(XD): $(ASSETS)
-	GOPATH=$(REPO) $(GO) build -trimpath -a -ldflags "-X xd/lib/version.Git=$(GIT_VERSION) -extldflags ${LDFLAGS}" -tags='$(TAGS)' -o $(XD)
+	GOPATH=$(REPO) $(GO) build -buildmode=pie -trimpath -a -ldflags "-X xd/lib/version.Git=$(GIT_VERSION) -extldflags ${LDFLAGS}" -tags='$(TAGS)' -o $(XD)
 
 dev: $(ASSETS)
-	GOPATH=$(REPO) $(GO) build -trimpath -race -v -a -ldflags "-X xd/lib/version.Git=$(GIT_VERSION) -extldflags ${LDFLAGS}" -tags='$(TAGS)' -o $(XD)
+	GOPATH=$(REPO) $(GO) build -buildmode=pie -trimpath -race -v -a -ldflags "-X xd/lib/version.Git=$(GIT_VERSION) -extldflags ${LDFLAGS}" -tags='$(TAGS)' -o $(XD)
 
 $(CLI): $(XD)
 	$(RM) $(CLI)
@@ -94,7 +94,7 @@ $(WEBUI_CORE): $(WEBUI_LOGO)
 webui: $(WEBUI_CORE)
 
 no-webui:
-	GOPATH=$(REPO) $(GO) build -trimpath -ldflags "-X xd/lib/version.Git=$(GIT_VERSION) -extldflags ${LDFLAGS}" -o $(XD)
+	GOPATH=$(REPO) $(GO) build -buildmode=pie -trimpath -ldflags "-X xd/lib/version.Git=$(GIT_VERSION) -extldflags ${LDFLAGS}" -o $(XD)
 
 install: $(XD) $(CLI)
 	$(MKDIR) $(PREFIX)/bin
