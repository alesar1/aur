# Maintainer: generated by script at https://github.com/zasdfgbnm/aurcran

_cranname=JuniperKernel
_cranver=1.4.1.0
pkgname=r-juniperkernel
pkgver=${_cranver}
pkgrel=1
pkgdesc="R kernel for Jupyter"
url="http://cran.r-project.org/web/packages/${_cranname}/index.html"
arch=('i686' 'x86_64')
license=('GPL2')
depends=('jupyter' 'r>=3.0.0' 'r-jsonlite' 'r-repr' 'r-rcpp>=0.11.0' 'r-gdtools>=0.1.6' 'r-pbdzmq>=0.3.2' 'r-data.table')
provides=("r-cran-${_cranname}")
conflicts=("r-cran-${_cranname}")
replaces=("r-cran-${_cranname}")
source=("http://cran.r-project.org/src/contrib/${_cranname}_${_cranver}.tar.gz")
sha256sums=('f6458915d529b670296734c942193b827def9c41bedc46cf95527302b9a3f0fd')

package() {
    mkdir -p ${pkgdir}/usr/lib/R/library
    cd ${srcdir}
    R CMD INSTALL ${_cranname} -l ${pkgdir}/usr/lib/R/library
    
    # .libPaths() is to hack the fact that we need to use some function of the package before it's installed
    Rscript -e ".libPaths(c( .libPaths(), '$pkgdir/usr/lib/R/library')); library(JuniperKernel); installJuniper(prefix='$pkgdir/usr/')"
}
