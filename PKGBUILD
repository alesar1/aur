# Generated by pakanton
# Maintainer: Branislav Hol√Ω <branoholy@gmail.com>
pkgbase='regilo'
pkgname=('regilo' 'regilo-lib')
pkgver='2.3.2'
pkgrel='1'
pkgdesc='A simple C++ library for controlling the Neato XV robot and the Hokuyo scanner'
arch=('i686' 'x86_64' 'arm' 'armv6h' 'armv7h' 'aarch64')
url='https://github.com/branoholy/regilo'
license=('GPL3')
makedepends=('cmake>=2.8' 'boost>=1.54')
source=("https://github.com/branoholy/regilo/archive/v$pkgver/regilo-$pkgver.tar.gz"
        "https://github.com/branoholy/regilo/releases/download/v$pkgver/regilo-$pkgver.tar.gz.sig")
md5sums=('f69716058877b2bcf19ee7f07db9db21'
         '144c1dda912397eda1e1d2547cc0fd3d')
sha1sums=('a2b0ddc2df3542fef16075ede2efb26923c410af'
          'bc54129160f3dcffd91b52430801b8f1777596da')
sha256sums=('6c521940639f3dcc0814ba19c6aca8ae1450b72b9e750526129dc83914b9034a'
            'd5c04b965ff284c963b81b404e4c8790a86f7b00ab0b925c09eb14c3315e377d')
sha512sums=('886118e161103c9bdaea7c833032aed0849a62d792a1e7d779c159bd12175eb977ef85b433bcac0fcde75f1a7f1dd31e97fdb93670c79a19ed7047f988dc38d7'
            'eff77db47744b88f181563d28675a9b6bc093a601076b2da0aebe42c54f853aad6e5ccf74167f5b54c60edba8fcfdeed2b6467f59210fcfca5b8daa378cd853c')
validpgpkeys=('D25809BF3563AA56A12B0F4D545EDD46FBAC61E6')

build() {
	cd $pkgbase-$pkgver

	mkdir -p builds/regilo && cd builds/regilo
	cmake -Dbuild-library:bool=on -Dinstall-headers:bool=on -Dexample:bool=on -DCMAKE_INSTALL_PREFIX=/usr ../..

	mkdir -p ../regilo-lib && cd ../regilo-lib
	cmake -Dinstall-library:bool=on -DCMAKE_INSTALL_PREFIX=/usr ../..
	rm -r CMakeFiles/regilo.dir/src CMakeFiles/regilo.dir/gen
	ln -s ../../../regilo/CMakeFiles/regilo.dir/src/ CMakeFiles/regilo.dir/src
	ln -s ../../../regilo/CMakeFiles/regilo.dir/gen/ CMakeFiles/regilo.dir/gen

	cd ../regilo
	make

	cd ../regilo-lib
	make
}

package_regilo() {
	pkgdesc='A simple C++ library for controlling the Neato XV robot and the Hokuyo scanner - development headers'
	depends=('boost>=1.54' "regilo-lib=$pkgver")

	cd regilo-$pkgver/builds/$pkgname
	make DESTDIR="$pkgdir/" install
}

package_regilo-lib() {
	pkgdesc='A simple C++ library for controlling the Neato XV robot and the Hokuyo scanner - runtime library'
	depends=('boost-libs>=1.54')

	cd regilo-$pkgver/builds/$pkgname
	make DESTDIR="$pkgdir/" install
}
