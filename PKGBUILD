# Maintainer: Ben Alex <ben.alex@acegi.com.au>

# There is no Arch Linux package for Tensorflow Lite and therefore this package
# delegates to the full python-tensorflow. The reason for needing this package
# at all is to accommodate packages requiring Tensorflow Lite (eg PyCoral).

pkgname=python-tflite-runtime
pkgver=2.5.0.post1
pkgrel=1
pkgdesc='TensorFlow Lite Python bindings'
arch=('any')
url='https://www.tensorflow.org/lite/'
license=('Apache')
depends=('python-tensorflow')
makedepends=("python" "python-pip")

# Generated by pipman (aside from addition of --extra-index-url)
build() {
  pip install --extra-index-url https://google-coral.github.io/py-repo/ --no-deps --target="tflite_runtime" tflite_runtime==2.5.0.post1
}

package() {
  sitepackages=$(python -c "import site; print(site.getsitepackages()[0])")
  mkdir -p $pkgdir/"$sitepackages"
  cp -r $srcdir/tflite_runtime/* $pkgdir/"$sitepackages"
}
