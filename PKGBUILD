# Generated by debtap
# Maintainer: Ricardo (XenGi) Band <email@ricardo.band>
# Contributor:
pkgname=sensu
pkgver=1.2.1
_debver='1.2.1-2'
pkgrel=9
pkgdesc="A monitoring framework that aims to be simple, malleable, and scalable."
arch=('x86_64')
url="https://sensuapp.org"
license=('MIT')
backup=('etc/default/sensu' 'etc/logrotate.d/sensu')
options=('!strip')
depends=('redis')
optdepends=('rabbitmq: sensu transport'
            'uchiwa: simple web dashboard')
install=${pkgname}.install
source=("https://repositories.sensuapp.org/apt/pool/jessie/main/s/sensu/sensu_${_debver}_amd64.deb")
sha256sums=('001b65b30666a97979ca2abc60a463fa91e05957bdaded4812d5bc23c12ebe9b')

package() {
	# Extract package data
	tar xzf data.tar.gz -C "${pkgdir}"

	# Fix directories structure differencies
	mkdir -p ${pkgdir}/usr/lib ${pkgdir}/run
    mv ${pkgdir}/lib/* ${pkgdir}/usr/lib/
    mv ${pkgdir}/var/run/* ${pkgdir}/run/
    rm -rf ${pkgdir}/var/run ${pkgdir}/lib
}
