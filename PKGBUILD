# Maintainer: sumt <sumt at sci dot fi>
pkgname=palemoon-i18n-default
pkgver=25.6
pkgrel=1
pkgdesc="Pale Moon language pack for system default language."
arch=('any')
url="http://www.palemoon.org/"
license=('MPL' 'GPL')
depends=("palemoon")
source=("lang-pref.js")
md5sums=('c654129d7633ca682436825e6eb0aead')

_languages=(
'ach	"Acholi (Uganda)"'
'af	"Afrikaans"'
'ak	"Ackan"'
'ar	"Arabic"'
'as	"Assamese (India)"'
'ast	"Asturian/Bable"'
'be	"Belarusian"'
'bg	"Bulgarian"'
'bn-BD	"Bengali (Bangladesh)"'
'bn-IN	"Bengali (India)"'
'br	"Breton"'
'bs	"Bosnian"'
'ca	"Catalan"'
'cs	"Czech"'
'csb	"Kashubian"'
'cy	"Welsh"'
'da	"Danish"'
'de	"German"'
'el	"Greek (Modern)"'
'en-GB	"English (U.K.)"'
'en-ZA	"English (South Africa)"'
'eo	"Esperanto"'
'es-AR	"Spanish (Argentina)"'
'es-CL	"Spanish (Chile)"'
'es-ES	"Spanish (Spain)"'
'es-MX	"Spanish (Mexico)"'
'et	"Estonian"'
'eu	"Basque"'
'fa	"Persian"'
'ff	"Pulaar Fulfulde"'
'fi	"Finnish"'
'fr	"French"'
'fy-NL	"Western Frisian (Netherlands)"'
'ga-IE	"Irish"'
'gd	"Gaelic (Scottish)"'
'gl-ES	"Galician (Spain)"'
'gu-IN	"Gujarati (India)"'
'he	"Hebrew"'
'hi-IN	"Hindi (India)"'
'hr	"Croatian"'
'hu	"Hungarian"'
'hy-AM	"Armenian"'
'id	"Indonesian"'
'is	"Icelandic"'
'it	"Italian"'
'ja	"Japanese"'
'kk	"Kazakh"'
'km	"Khmer (Cambodian)"'
'kn	"Kannada (India)"'
'ko	"Korean"'
'ku	"Kurdish"'
'lg	"Ganda"'
'lij	"Ligure"'
'lt	"Lithuanian"'
'lv	"Latvian"'
'mai	"Maithili"'
'mk	"Macedonian"'
'ml	"Malayalam"'
'mn	"Mongolian"'
'mr	"Marathi"'
'nb-NO	"Norwegian (Bokm√•l)"'
'nl	"Dutch"'
'nn-NO	"Norwegian (Nynorsk)"'
'nso	"Pedi/Nothern Sotho"'
'or	"Oriya"'
'pa-IN	"Panjabi/Punjabi (India)"'
'pl	"Polish"'
'pt-BR	"Portuguese (Brazil)"'
'pt-PT	"Portuguese (Portugal)"'
'rm	"Romansh"'
'ro	"Romanian/Moldavian"'
'ru	"Russian"'
'si	"Sinhala"'
'sk	"Slovak"'
'sl	"Slovenian"'
'son	"Songhai"'
'sq	"Albanian"'
'sr	"Serbian"'
'sv-SE	"Swedish"'
'sw	"Swahili"'
'ta-LK	"Tamil (Sri Lanka)"'
'ta	"Tamil"'
'te	"Telugu"'
'th	"Thai"'
'tr	"Turkish"'
'uk	"Ukranian"'
'vi	"Vietnamese"'
'zh-CN	"Chinese (Simplified)"'
'zh-TW	"Chinese (Traditional)"'
'zu	"Zulu"'
)

_md5sums=('602ad94840165576e8631737079f8adf'
         '5fd759cf9bd7ebb30a3d6bd5e9140b2c'
         '3755a3bff5ca606a63854aaa4e194639'
         '3bb1db3f969b16655404a0b76d2779e2'
         'd481c204af8272f00c21aa4bb048395a'
         '938b4cf6f1bad5f910f8d2f121bc4b97'
         '3125f8bcf10ec9ddd33c33e24d5e68a0'
         '326ee24bb9e053c7b805d27ea9cd46b2'
         'ecb34c8a0f80c1bc2213e954358ae81a'
         'f5672ecc756fa61c9a5968f83348d83c'
         'e98fa3e52ae97ba1b3745006ac4a7265'
         '0224ceb0dc7a3878c91ae0289da05642'
         '51bff7f70357729138aba130b242c7a4'
         '268201fb5e34a53c9a81d6e1598ad7e6'
         'c158011da0c171f8daa827335206bb4a'
         '1e3d380f0893bb7e5fc6a5e98a262374'
         '0971a7507a5fe446959b39a392392a15'
         '0c60d02c9bc292bde5a94a44207c2232'
         'f801a2ac591f2e904dc90ad6e064e4e2'
         'a95049d4a2f9ef1e0b768913858ed571'
         'c4e061ae2cad939d046817368305d438'
         '8b6efbd0915abd43587db8435f6ac4b0'
         '861df9864d7c56d9bb49fa1bc0355d4f'
         '1b64e564f70e7307cc40028196b46183'
         '73554f5a56fb0a0f29132eb8c2774338'
         '21c4a2c2439d93853baf9a8b303b8e79'
         '94686a6c9b4069838a2730dc57e2e24c'
         '610db9e9de1cd6c5f69a4f977ab9511d'
         '7dff757e0c07219c66b053a4f599adea'
         'dab545dc7b2bd785eb61167cbb0489bc'
         'da07b69d8fcc231f922b1ba9b6c084e8'
         'beafc3d724c95bf71df023d91e2cece8'
         'f84d04d8bd89cd2717d5c1772b724c30'
         '8202fc45020db3b0eebe5edb199e1a41'
         'ead1dd9df59ad9684390bf9193932234'
         '41ddd3bdcb4c49001e5ad09ee109d9ab'
         'e9899299adb04a0bb13e8c6534e5a912'
         '4ce713d12928aa18964ab996e185065d'
         '8675326cd967087a68ab7094e3ef9b4f'
         '1e318f7cbe19c6789a81192cf01e598a'
         '85b2156bfcc1d1b62ffbde1571dea6b3'
         '41c79d464715703558db363e44f7f2b0'
         '13214cbdf92e5be7ad56f6c4a5403473'
         '6d111dbca411631aeaeaa1976bebefcd'
         '4d53076941bfbe6bb1b3ac1c26c1b683'
         '0935e4c5b8fe50959ab49ff819834a1e'
         'f3ab921a77838578c81dc9277417f25f'
         '98f9b2287fa27b4a214c9fdfdf64079f'
         '0798c26ccd687f65be039f716da414f6'
         '22ca5fb96acb1e242753208915579eb9'
         'fb9b5d5704062f6d80ce4daef6e84fb8'
         'fd2952f33b1ee71c9cfb0e34be2c8f6e'
         'fd659e77d75ba788492041f84b9bd8d3'
         'c9e874b645df41a4e744041d2052803b'
         'f4176179dd31072fbee944792d4b83ee'
         'b7c55ae9113a3abc557d73e3297b62dd'
         'efa35ecb885c3712a2e280e30f08988a'
         '43f24e904e4f454b1004221ba4deb6c4'
         '758cf129928ad2383c5ea3e47ca3ae8c'
         'fdec0b5df7aff0cf91135d390314eed3'
         '308e09c0367876581700a98e9b1b1b53'
         '013c318632ebece89a4b0c6197d5cc75'
         '31f2d83900c93e7e3aacf466ec0e7f80'
         '1be20de31cd10774a70abf7be491df92'
         '7c250a95f008928513a516e9116e8c04'
         '1e71e9eca436607467e7ec05d401ef62'
         'b42abb2c6635938ece348ec4a695d0a1'
         'a8dadf6717ee34de12f3d7bf75270c7b'
         'f1cb151bf8576e47b4d110546ae4241c'
         '9e9060343740ec585af3491d70169951'
         'f21386478112878208841bc89bb7702b'
         '9028496c3c4d1cf85fecdc1a2011509c'
         '0ec81c021649103426f732eb58bf7b55'
         '3c8457e8410b7190929c56e9876dbe6a'
         'd847b1ee5d65ed2f029f958b19e6076d'
         'b42564be50a0c876129f02602e86fbd4'
         'e74726c39613206136b6ca81b74444d9'
         'd81b40a504dff535fe8c8801f6843c86'
         '08d657e06eb654d7a46c1a02904d881f'
         '3710403cc8ea489703ad428c65c423b3'
         'adff20f68eec51063a613dd9010fdcde'
         '5331bcaa75e3821e549334d8cf754690'
         '6b74923caaecb630fa34c4724f8ec466'
         '4e2ea51d6678c40901f1535ffdcb9ba3'
         '459a3da734f57743ed19091818b3a03f'
         'd93e0bd5015b7fbedd685070601b26e0'
         '05622d2913af90fefdec4b1cb077fa26'
         '7acf5e7ff90f1350f8939abaecf71299'
         '95dd3713a0b9089773637b75a5e14886'
         '848f956f6a9a8448ce7008ecb3a13c5b')

_systemlocale=$(echo $LANG | awk -F'[ .@]' '{print $1}' | tr _ -)
_url=http://relmirror.palemoon.org/langpacks/$pkgver

for i in "${!_languages[@]}"; do
  _locale=$(echo "${_languages[$i]}" | cut -f 1)
  if [[ $_systemlocale == $_locale* ]]; then
    _sourcename=palemoon-i18n-$pkgver-$_locale.xpi
    source+=("$_sourcename::$_url/$_locale.xpi")
    noextract=("$_sourcename")
    md5sums+=(${_md5sums[$i]})
    break
  fi
done

prepare() {
  if [ ${#source[@]} -ne 2 ]; then
    error "Language pack for $_systemlocale not found"
    exit 1
  fi
}

package() {
  install -Dm644 "$_sourcename" \
    "$pkgdir/usr/lib/palemoon/browser/extensions/langpack-$_locale@palemoon.org.xpi"
  install -Dm644 lang-pref.js \
    "$pkgdir/usr/lib/palemoon/browser/defaults/preferences/lang-pref.js"
}
