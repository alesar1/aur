# Generated by debtap
# Maintainer: Ricardo (XenGi) Band <email@ricardo.band>
# Contributor:
pkgname=sensu
pkgver=1.2.1
pkgrel=3
pkgdesc="A monitoring framework that aims to be simple, malleable, and scalable."
arch=('x86_64')
url="https://sensuapp.org"
license=('custom')
groups=('')
backup=('etc/default/sensu' 'etc/logrotate.d/sensu')
options=('!strip' '!emptydirs')
install=${pkgname}.install
source=("https://repositories.sensuapp.org/apt/pool/jessie/main/s/sensu/sensu_1.2.1-2_amd64.deb")
sha256sums=('001b65b30666a97979ca2abc60a463fa91e05957bdaded4812d5bc23c12ebe9b')
optdepends=('redis: data store and sensu transport'
            'rabbitmq: sensu transport')

package() {
	# Extract package data
	tar xzf data.tar.gz -C "${pkgdir}"

	# Fix directories structure differencies
	cd "${pkgdir}"

	#install -D -m644 "/opt/sensu/embedded/lib/ruby/site_ruby/2.4.0/rubygems/util/licenses.rb" "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
	mkdir -p usr/lib 2> /dev/null
    mv lib/* usr/lib
    rm -rf lib
}
