# Maintainer: Renaud Littolff <rlittolff@gmail.com>
# Contributor: Gregory Schier <greg@schier.co>

pkgname=insomnia
pkgver=5.0.1
pkgrel=1
pkgdesc="A simple and beautiful REST API and HTTP client"
arch=('x86_64')
url="http://insomnia.rest/"
options=('!strip' '!upx')
depends=('libcurl-compat')

source=(
    "https://downloads.insomnia.rest/linux/insomnia_${pkgver}_amd64.deb"
    "insomnia.sh"
)

package() {
    # Define some helpers
    SCRIPT_PATH=${pkgdir}/opt/Insomnia/start-insomnia.sh

    # Extract the core package
    tar -xf data.tar.xz -C "${pkgdir}"

    # Install the necessary parts
    install -d ${pkgdir}/usr/share/applications
    install -d ${pkgdir}/usr/share/icons
    install -d ${pkgdir}/opt/Insomnia

    # Setup usr folder
    chmod -R go-w ${pkgdir}/usr
    mkdir -p ${pkgdir}/usr/bin

    # Setup the start script and permissions
    cp ${srcdir}/insomnia.sh ${SCRIPT_PATH}
    chmod 755 ${SCRIPT_PATH}
    ln -s ${SCRIPT_PATH} ${pkgdir}/usr/bin/insomnia
}

# Generated by `$ makepkg -g >> PKGBUILD`
md5sums=('7f44b1f6807e8aabd5d018a2a9eb3ad8'
         '7c5c262829ac604b83452874e6631ff8')
