# Maintainer: Ali Molaei <ali dot molaei at protonmail dot com>
# Contributor: Fredy Garc√≠a <frealgagu at gmail dot com>
# Contributor: Andrew Stubbs <andrew dot stubbs at gmail dot com>

pkgname=etcher-bin
pkgver=1.5.66
pkgrel=1
pkgdesc="Flash OS images to SD cards & USB drives, safely and easily"
arch=("x86_64")
url="http://www.${pkgname%-bin}.io/"
license=("apache")
provides=("${pkgname%-bin}")
conflicts=("${pkgname%-bin}")
depends=("alsa-lib" "gconf" "gtk2" "libxss" "libxtst" "nss")
optdepends=("libnotify: for notifications"
            "speech-dispatcher: for text-to-speech")
source=("https://github.com/balena-io/${pkgname%-bin}/releases/download/v${pkgver}/balena-${pkgname%-bin}-electron_${pkgver}_amd64.deb")
options=("!strip")
#sha256sums=("65271a79f15826f5a0ad41dd2bdac44c8b1359af9eea26f89f064b0f68556888")
sha256sums=("db5c3eb869d2921fea9b111216ff5bc4da1ef2a1c94a8f6f426206c2d7469ca8")

build() {
  mkdir -p "${srcdir}/output"
  tar -xvf "${srcdir}/data.tar.xz" -C "${srcdir}/output"
}

package() {
  cp -r "${srcdir}/output/"* "${pkgdir}"
  install -d "${pkgdir}"/usr/bin
  ln -s /opt/balenaEtcher/balena-etcher-electron.bin "${pkgdir}"/usr/bin/etcher
}
