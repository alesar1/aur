# Maintainer: Frederik Schwan <frederik dot schwan at linux dot com>
# Contributor: Sebastian BÃ¸e <sebastianbooe at gmail dot com>

pkgname=chisel
_pkgname=chisel3
pkgver=3.1.3
pkgrel=1
pkgdesc='Constructing Hardware in a Scala Embedded Language'
arch=('any')
url='https://chisel.eecs.berkeley.edu/'
license=('BSD')
depends=('java-environment' 'verilator')
makedepends=('sbt')
source=(https://github.com/freechipsproject/chisel3/archive/v$pkgver.tar.gz)
sha512sums=('8d7999e393a959e8f28b0899b1482b8bd4674a206fd2e6689ab9d8913c439a5caaa305efcc6214c10c3255064f2ab1a7775fc3e5438b52e0eec896df85fe66da')

build(){
    cd "${srcdir}/${_pkgname}-${pkgver}"
    sbt publishLocal
}

package() {
    install -d "${pkgdir}/usr/share/licenses/${pkgname}" "${pkgdir}/usr/share/scala/${pkgname}/"

    cd "${srcdir}/${_pkgname}-${pkgver}"
    install -Dm644 target/scala-2.11/${_pkgname}_2.11-${pkgver}.jar "${pkgdir}/usr/share/scala/${pkgname}/${pkgname}.jar"
    install -Dm644 src/LICENSE.txt "${pkgdir}/usr/share/licenses/${pkgname}/"
}
