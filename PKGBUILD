# Maintainer: Moses Narrow <moe_narrow@use.startmail.com>
pkgname=ms-pacman
pkgname1=ms-pacman
pkgdesc="Miss Pacman creates debian packages from Archlinux packages"
pkgver='autogenerated'
pkgrel=1
arch=('any')
url="https://github.com/0pcom/ms-pacman"
license=()
makedepends=()
depends=(yay-git)
source=("git+${url}.git#branch=${BRANCH:-master}")
sha256sums=('SKIP')

pkgver() {
	cd ${srcdir}/${pkgname1}
	local date=$(git log -1 --format="%cd" --date=short | sed s/-//g)
	local count=$(git rev-list --count HEAD)
	local commit=$(git rev-parse --short HEAD)
	echo "${date}.${count}_${commit}"
}

prepare() {
rm ${srcdir}/${pkgname1}/README.md
chmod +x ${srcdir}/${pkgname1}/*
}

package() {
mkdir -p ${pkgdir}/usr/bin
	install -Dm755 ${srcdir}/${pkgname1}/*  ${pkgdir}/usr/bin
	chmod 755 ${pkgdir}/usr/bin/*
}
