# Generated by gem2arch (https://github.com/anatol/gem2arch)
# Maintainer: Anatoly Bashmakov <anatoly at posteo dot net>
# Maintainer: Grey Christoforo <first name at last name dot net>

_gemname=gollum
pkgname=$_gemname
pkgver=5.1.1
pkgrel=1
pkgdesc='A simple, Git-powered wiki.'
arch=(any)
url='http://github.com/gollum/gollum'
license=(MIT)
depends=(ruby
         ruby-gollum-lib
         'ruby-kramdown'
         'ruby-kramdown-parser-gfm<1.1'
         ruby-sinatra
         ruby-sinatra-contrib
         'ruby-mustache<1'
         ruby-useragent
         ruby-gemojione
         'ruby-octicons<9'
         'ruby-sprockets<4'
         ruby-sass
         'ruby-uglifier<4'
         ruby-sprockets-helpers
         ruby-rss)
makedepends=(ruby-rdoc)
options=(!emptydirs)
source=(https://rubygems.org/downloads/$_gemname-$pkgver.gem)
noextract=($_gemname-$pkgver.gem)
sha1sums=('28b14b7c089f82bc19bdf7eb2dff33b4b008fe9a')

package() {
  local _gemdir="$(ruby -e 'puts Gem.default_dir')"
  gem install --ignore-dependencies --no-user-install -i "$pkgdir/$_gemdir" -n "$pkgdir/usr/bin" $_gemname-$pkgver.gem

  # Hack to disable therubyrhino for java platform
  sed -e '/therubyrhino/d' -i $pkgdir/$_gemdir/specifications/$_gemname-$pkgver.gemspec

  rm "$pkgdir/$_gemdir/cache/$_gemname-$pkgver.gem"
  install -D -m644 "$pkgdir/$_gemdir/gems/$_gemname-$pkgver/LICENSE" "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}
