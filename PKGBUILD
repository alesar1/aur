# Maintainer: Adrian Perez de Castro <aperez@igalia.com>
pkgname='kwebapp'
pkgdesc='Generator for front-end and back-end code for Web applications written in C'
pkgver='0.4.7'
pkgrel='1'
url='https://kristaps.bsd.lv/kwebapp'
depends=('glibc')
license=('BSD')
optdepends=('ksql:: Needed by code generated by kwebapp')
arch=('x86_64')
source=("${url}/snapshots/kwebapp-${pkgver}.tar.gz")
sha512sums=('3ced4d8c1da4e9c0e0f209b24ba845e69952a7d2bed5e7f6bd687aeb0ef89951bf27fb4c36b3a9fab946e88a8f877fd28016a7eee74df92d4ef00695769e7f95')

build () {
	cd "${pkgname}-${pkgver}"
	./configure PREFIX=/usr MANDIR=/usr/share/man
	make
}

package () {
	cd "${pkgname}-${pkgver}"
	make install DESTDIR="${pkgdir}"
	awk '/^\/\*/,/\*\// { print ; }' main.c > COPYING
	install -Dm644 COPYING "${pkgdir}/usr/share/licenses/${pkgname}/COPYING"
}
