# Maintainer: Andrew Shark <ashark linuxcomp.ru>

pkgname=supermicro-update-manager
pkgver=2.3.0
pkgrel=2
pkgdesc="manage the firmware and configuration for Supermicro motherboards"
arch=(x86_64)
url="https://www.supermicro.com/en/solutions/management-software/supermicro-update-manager"
license=('custom: EULA')
backup=(etc/sumrc)
source=("sum_${pkgver}_Linux_x86_64_20190808.tar.gz::https://www.supermicro.com/SwDownload/SwSelect_Free.aspx")
sha256sums=("5040a3712dee2567ae081d6f02d667c47ef7da1013963aea7a12b6217e6cec2b")

DLAGENTS=("https::/usr/bin/curl \
-d __EVENTTARGET=ctl00%24CPCenter%24MyGridView \
-d __EVENTARGUMENT=Action%241 \
-d __VIEWSTATE=%2FwEPDwULLTE4ODkyNjU0NDcPFgIeDVNvcnRFeHByVmFsdWUFBnN3TmFtZRYCZg9kFgICAw9kFgwCBw9kFggCBw8PFgQeBVdpZHRoGwAAAAAAwIJAAQAAAB4EXyFTQgKAAmQWAgIDDw8WAh4EVGV4dAUDU1VNZGQCCQ88KwANAQAPFgQeC18hRGF0YUJvdW5kZx4LXyFJdGVtQ291bnQCAmQWAmYPZBYGAgEPZBYQZg8PFgIfAwUfU3VwZXJtaWNybyBVcGRhdGUgTWFuYWdlciAoU1VNKWRkAgEPDxYCHwMFEEJTRCB4NjQsIEJTRCB4ODZkZAICDw8WAh8DBQZ0YXIuZ3pkZAIDDw8WAh8DBQgwOC0wOC0xOWRkAgQPDxYCHwMFBTIuMy4wZGQCBQ8PFgIfAwWfAlN1cGVybWljcm8mIzE3NDsgVXBkYXRlIE1hbmFnZXIgcmVtb3RlbHkgdXBkYXRlcyB0aGUgQklPUyBhbmQgQk1DL0lQTUkgZmlybXdhcmUsIGFzIHdlbGwgYXMsIHN5c3RlbSBzZXR0aW5ncyBvZiBTdXBlcm1pY3JvIFg5IChSb21sZXkpLCBYMTAsIGFuZCBYMTEgZ2VuZXJhdGlvbiBiYXNlZCBtYWNoaW5lIHRocm91Z2ggaW4tYmFuZCBhbmQgT09CIChPdXQtT2YtQmFuZCkgY29tbXVuaWNhdGlvbiBjaGFubmVscywgaS5lLiwgY29tbXVuaWNhdGlvbiB0aHJvdWdoIHRoZSBCTUMvSVBNSSBpbnRlcmZhY2UuZGQCBg9kFgJmDw8WAh8DBQtBY2NlcHQgRVVMQWRkAgcPDxYCHwMFAzI2MWRkAgIPZBYQZg8PFgIfAwUfU3VwZXJtaWNybyBVcGRhdGUgTWFuYWdlciAoU1VNKWRkAgEPDxYCHwMFFExpbnV4IHg2NCwgTGludXggeDg2ZGQCAg8PFgIfAwUGdGFyLmd6ZGQCAw8PFgIfAwUIMDgtMDgtMTlkZAIEDw8WAh8DBQUyLjMuMGRkAgUPDxYCHwMFnwJTdXBlcm1pY3JvJiMxNzQ7IFVwZGF0ZSBNYW5hZ2VyIHJlbW90ZWx5IHVwZGF0ZXMgdGhlIEJJT1MgYW5kIEJNQy9JUE1JIGZpcm13YXJlLCBhcyB3ZWxsIGFzLCBzeXN0ZW0gc2V0dGluZ3Mgb2YgU3VwZXJtaWNybyBYOSAoUm9tbGV5KSwgWDEwLCBhbmQgWDExIGdlbmVyYXRpb24gYmFzZWQgbWFjaGluZSB0aHJvdWdoIGluLWJhbmQgYW5kIE9PQiAoT3V0LU9mLUJhbmQpIGNvbW11bmljYXRpb24gY2hhbm5lbHMsIGkuZS4sIGNvbW11bmljYXRpb24gdGhyb3VnaCB0aGUgQk1DL0lQTUkgaW50ZXJmYWNlLmRkAgYPZBYCZg8PFgIfAwUhRG93bmxvYWQgRmlsZSBwZXIgRVVMQSBhY2NlcHRhbmNlZGQCBw8PFgIfAwUDMjYyZGQCAw8PFgIeB1Zpc2libGVoZGQCDQ8PFgIfA2VkZAIPD2QWAgIBDw8WBh8BGwAAAAAAwIJAAQAAAB8DBYA%2BPGI%2BPGZvbnQgY29sb3I9J2Jyb3duJz5FbmQgVXNlciBMaWNlbnNlIEFncmVlbWVudCAoRVVMQSk8L2ZvbnQ%2BPC9iPjxicj48YnI%2BSU1QT1JUQU5UIC0gUkVBRCBDQVJFRlVMTFkgQkVGT1JFIElOU1RBTExJTkc6PGJyPjxicj5USElTIEVORC1VU0VSIExJQ0VOU0UgQUdSRUVNRU5UIGlzIGEgbGVnYWwgY29udHJhY3QgYmV0d2VlbiBTVVBFUiBNSUNSTyBDT01QVVRFUiwgSU5DLiAoIlNVUEVSTUlDUk8iKSBhbmQgdGhlIGluZGl2aWR1YWwgb3IgZW50aXR5IHdoaWNoIGRvd25sb2FkcywgaW5zdGFsbHMgb3Igb3RoZXJ3aXNlIHVzZXMgdGhlIGF0dGFjaGVkIFNVUEVSTUlDUk8gc29mdHdhcmUgcHJvZHVjdCAoInRoZSBTb2Z0d2FyZSAiKS48YnI%2BPGJyPkJZIENMSUNLSU5HIE9OIFRIRSAiQUNDRVBUIiBCVVRUT04gQVQgVEhFIEVORCBPRiBUSElTIEFHUkVFTUVOVCwgV0hJQ0ggV0lMTCBJTlNUQUxMIFRIRSBBVFRBQ0hFRCBTT0ZUV0FSRSwgT1IgQlkgT1RIRVJXSVNFIElOU1RBTExJTkcgT1IgVVNJTkcgVEhFIFNPRlRXQVJFLCBUSEUgSU5ESVZJRFVBTCBPUiBFTlRJVFkgV0hJQ0ggSU5TVEFMTFMgT1IgVVNFUyBUSEUgU09GVFdBUkUgKCJMSUNFTlNFRSIpIEFHUkVFUyBUTyBCRSBCT1VORCBCWSBUSEUgVEVSTVMgT0YgVEhJUyBBR1JFRU1FTlQuICBJRiBZT1UgRE8gTk9UIEFHUkVFIFRPIEFMTCBPRiBUSEUgVEVSTVMgT0YgVEhJUyBBR1JFRU1FTlQsIENMSUNLIFRIRSAiQ0FOQ0VMIiBCVVRUT04gQU5EIFRIRSBJTlNUQUxMQVRJT04gUFJPQ0VTUyBXSUxMIE5PVCBDT05USU5VRS48YnI%2BPGJyPjxiPjEuPC9iPiBMaWNlbnNlOiBUaGlzIEFncmVlbWVudCBncmFudHMgeW91LCB0aGUgTGljZW5zZWUsIGEgbGltaXRlZCwgbm9uLWV4Y2x1c2l2ZSwgZ2xvYmFsLCBub24tdHJhbnNmZXJhYmxlIGxpY2Vuc2UgdG8gZG93bmxvYWQgdGhlIFNvZnR3YXJlLCBpbnN0YWxsIG9uIFNVUEVSTUlDUk8ncyBwcm9kdWN0cywgYW5kIGRpc3RyaWJ1dGUgdGhlIFNvZnR3YXJlIGluIGNvbWJpbmF0aW9uIHdpdGggU1VQRVJNSUNSTydzIHByb2R1Y3RzICgiTGljZW5zZSIpLjxicj48YnI%2BPGI%2BMi48L2I%2BIEdlbmVyYWwgUHVibGljIExpY2Vuc2UvTGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuIENlcnRhaW4gY29tcG9uZW50cyBvZiB0aGUgU29mdHdhcmUgbWF5IGJlIHN1YmplY3QgdG8gdGhlIEdOVSBHUEwgb3IgTEdQTCB0ZXJtcyBhbmQgY29uZGl0aW9ucyBhdmFpbGFibGUgZm9yIHZpZXdpbmcgYXQgaHR0cDovL3d3dy5nbnUub3JnL2NvcHlsZWZ0L2dwbC5odG1sIGFuZCBodHRwOi8vd3d3LmdudS5vcmcvY29weWxlZnQvbGVzc2VyLmh0bWwgb3IgYXMgb3RoZXJ3aXNlIGRlc2lnbmF0ZWQuIFRvIHRoZSBleHRlbnQgeW91IHJlY2VpdmUgU29mdHdhcmUgdW5kZXIgdGhpcyBMaWNlbnNlIHdoaWNoIGNvbnRhaW5zIGNvbXBvbmVudHMgc3ViamVjdCB0byB0aGUgR1BMIG9yIExHUEwgdGVybXMsIHlvdSBhZ3JlZSB0byBiZSBib3VuZCBieSBhbGwgdGhlIHRlcm1zIGFuZCByZXN0cmljdGlvbnMgdGhlcmVpbiBpbmNsdWRpbmcga2VlcGluZyBhbGwgY29weXJpZ2h0IG5vdGljZXMgaW4gdGFjdCBmb3IgdGhlIGR1cmF0aW9uIG9mIHlvdXIgdXNlIG9mIHRoZSBTb2Z0d2FyZSBhbmQgbW9kaWZ5aW5nIGFuZC9vciByZWRpc3RyaWJ1dGluZyBzdWNoIGNvbXBvbmVudHMgb25seSBpbiBhY2NvcmRhbmNlIHdpdGggdGhlIHRlcm1zIG9mIHRoZSBHTlUgR1BMIG9yIExHUEwgdGVybXMuPGJyPjxicj48Yj4zLjwvYj4gUmVzdHJpY3Rpb25zOiBUaGUgTGljZW5zZWUgbWF5IE5PVCBzdWJsaWNlbnNlLCBhc3NpZ24sIHJlcHJvZHVjZSBvciBkaXN0cmlidXRlIGNvcGllcyBvZiB0aGUgU29mdHdhcmUgdG8gb3RoZXJzIGV4Y2VwdCBhcyBvdGhlcndpc2UgcHJvdmlkZWQgaGVyZWluLiBUaGUgU29mdHdhcmUgY29udGFpbnMgdHJhZGUgc2VjcmV0cy4gVGhlIExpY2Vuc2VlIG1heSBOT1QgZGVjb21waWxlLCByZXZlcnNlIGVuZ2luZWVyLCBkaXNhc3NlbWJsZSwgb3Igb3RoZXJ3aXNlIHJlZHVjZSB0aGUgU29mdHdhcmUgdG8gYSBodW1hbiByZWFkYWJsZSBmb3JtLiBUSEUgTElDRU5TRUUgTUFZIE5PVCBNT0RJRlksIEFEQVBULCBUUkFOU0xBVEUsIFJFTlQsIExFQVNFLCBMT0FOLCBSRVNFTEwgRk9SIFBST0ZJVCwgRElTVFJJQlVURSwgT1IgT1RIRVJXSVNFIEFTU0lHTiBPUiBUUkFOU0ZFUiBUSEUgU09GVFdBUkUsIE9SIENSRUFURSBERVJJVkFUSVZFIFdPUktTIEJBU0VEIFVQT04gVEhFIFNPRlRXQVJFIE9SIEFOWSBQQVJUIFRIRVJFT0YsIEVYQ0VQVCBBUyBFWFBSRVNTTFkgQUdSRUVEIFRPIElOIFdSSVRJTkcgQlkgU1VQRVJNSUNSTy48YnI%2BPGJyPjxiPjQuPC9iPiBDb3B5cmlnaHQgUHJvdGVjdGlvbjogRXhjZXB0IHRvIHRoZSBleHRlbnQgdGhlIFNvZnR3YXJlIHdhcyBsaWNlbnNlZCB0byBTVVBFUk1JQ1JPIGJ5IGl0cyBsaWNlbnNvciwgdGhlIFNvZnR3YXJlIGFuZCBhbGwgcmVsYXRlZCBkb2N1bWVudGF0aW9uIGFyZSBvd25lZCBieSBTVVBFUk1JQ1JPIGFuZCBhcmUgcHJvdGVjdGVkIGJ5IFVuaXRlZCBTdGF0ZXMnIGNvcHlyaWdodCBsYXdzIGFuZCBpbnRlcm5hdGlvbmFsIHRyZWF0eSBwcm92aXNpb25zLiBBbnkgY29weWluZyBvciByZWRpc3RyaWJ1dGlvbiwgZXhjZXB0IGFzIGV4cHJlc3NseSBwZXJtaXR0ZWQgYnkgdGhpcyBBZ3JlZW1lbnQgaXMgYSB2aW9sYXRpb24gb2YgdGhlIGxhdy4gWW91IG1heSBub3QgcmVtb3ZlIG9yIGFsdGVyIGFueSBjb3B5cmlnaHQsIHRyYWRlIHNlY3JldCwgcGF0ZW50LCB0cmFkZW1hcmssIHRyYWRlIG5hbWUsIGxvZ28sIHByb2R1Y3QgZGVzaWduYXRpb24gb3Igb3RoZXIgcHJvcHJpZXRhcnkgYW5kL29yIG90aGVyIGxlZ2FsIG5vdGljZXMgY29udGFpbmVkIGluIG9yIG9uIHRoZSBTb2Z0d2FyZS4gVGhlc2UgbGVnYWwgbm90aWNlcyBtdXN0IGJlIHJldGFpbmVkIG9uIGFueSBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLiBFeGNlcHQgYXMgb3RoZXJ3aXNlIGV4cHJlc3NseSBwcm92aWRlZCwgdGhpcyBMaWNlbnNlIGdyYW50cyBubyBleHByZXNzIG9yIGltcGxpZWQgcmlnaHRzIHVuZGVyIHRoZSByZXNwZWN0aXZlIHBhdGVudHMsIGNvcHlyaWdodHMsIHRyYWRlbWFya3Mgb3Igb3RoZXIgaW50ZWxsZWN0dWFsIHByb3BlcnR5IHJpZ2h0cyBvZiBTVVBFUk1JQ1JPIG9yIGl0cyBsaWNlbnNvcnMuPGJyPjxicj48Yj41LjwvYj4gVGVybWluYXRpb246IFRoaXMgTGljZW5zZSBpcyBlZmZlY3RpdmUgdW50aWwgdGVybWluYXRlZC4gVGhpcyBMaWNlbnNlIHdpbGwgdGVybWluYXRlIGltbWVkaWF0ZWx5IHdpdGhvdXQgbm90aWNlIGZyb20gU1VQRVJNSUNSTyBpZiB0aGUgTGljZW5zZWUgZmFpbHMgdG8gY29tcGx5IHdpdGggYW55IG9mIGl0cyBwcm92aXNpb25zLiBVcG9uIHRlcm1pbmF0aW9uIHRoZSBMaWNlbnNlZSBtdXN0IGRlc3Ryb3kgdGhlIFNvZnR3YXJlIGFuZCBhbGwgY29waWVzIHRoZXJlb2YsIGFuZCB0aGUgTGljZW5zZWUgbWF5IHRlcm1pbmF0ZSB0aGlzIExpY2Vuc2UgYXQgYW55IHRpbWUgYnkgZG9pbmcgc28uPGJyPjxicj48Yj42LjwvYj4gTm8gV2FycmFudHk6IFRIRSBTT0ZUV0FSRSBJUyBERUxJVkVSRUQgVE8gTElDRU5TRUUgIkFTLUlTIi4gU1VQRVJNSUNSTyBBTkQgSVRTIFNVUFBMSUVSUyBBTkQgUkVTRUxMRVJTIE1BS0UgTk8gV0FSUkFOVFkgQVMgVE8gVEhFIFVTRSBPUiBQRVJGT1JNQU5DRSBPRiBUSEUgU09GVFdBUkUgT0YgQU5ZIEtJTkQuIFNVUEVSTUlDUk8gQU5EIElUUyBTVVBQTElFUlMgQU5EIFJFU0VMTEVSUyBETyBOT1QgV0FSUkFOVCBUSEFUIFRIRSBTT0ZUV0FSRSBJUyBGUkVFIE9GIERFRkVDVFMsIE1FUkNIQU5UQUJMRSwgRklUIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBPUiBOT04tSU5GUklOR0lORyBPRiBUSElSRCBQQVJUWSBSSUdIVFMsIEFORCBESVNDTEFJTSBBTkQgRVhDTFVERSBBTEwgV0FSUkFOVElFUywgRVhQUkVTUyBPUiBJTVBMSUVELCBXSVRIIFJFU1BFQ1QgVE8gVEhFIFNPRlRXQVJFLCBJVFMgVVNFLCBQRVJGT1JNQU5DRSBPUiBBUFBMSUNBVElPTiwgVEhFIERJU0tFVFRFIE9SIE9USEVSIFRBTkdJQkxFIE1FRElBIE9OIFdISUNIIFRIRSBTT0ZUV0FSRSBJUyBERUxJVkVSRUQsIE9SIEFOWSBJTkZPUk1BVElPTiBQUk9WSURFRCBSRUdBUkRJTkcgVEhFIFNPRlRXQVJFLjxicj48YnI%2BPGI%2BNy48L2I%2BIExpbWl0YXRpb24gb2YgTGlhYmlsaXR5OiBJTiBOTyBFVkVOVCBXSUxMIFNVUEVSTUlDUk8gT1IgSVRTIExJQ0VOU09SUyBCRSBMSUFCTEUgVE8gTElDRU5TRUUgRk9SIEFOWSBEQU1BR0VTIElOQ0xVRElORyBBTlkgTE9TVCBQUk9GSVRTLCBMT1NUIFNBVklOR1MgT1IgT1RIRVIgSU5DSURFTlRBTCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMsIEVWRU4gSUYgU1VQRVJNSUNSTyBPUiBJVFMgTElDRU5TT1JTIEhBUyBCRUVOIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFUywgT1IgRk9SIEFOWSBDTEFJTSBCWSBBTlkgT1RIRVIgUEFSVFkuIElOIE5PIEVWRU5UIFdJTEwgVEhFIExJQUJJTElUWSBPRiBTVVBFUk1JQ1JPIE9SIElUUyBMSUNFTlNPUlMsIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFKSwgU1RSSUNUIExJQUJJTElUWSBPUiBPVEhFUldJU0UsIEVYQ0VFRCBUSEUgQU1PVU5UIFBBSUQgQlkgWU9VIFVOREVSIFRISVMgTElDRU5TRS48YnI%2BPGJyPjxiPjguPC9iPiBHZW5lcmFsOiBDYWxpZm9ybmlhIGxhdywgZXhjZXB0IGFzIHRvIGNvcHlyaWdodCBtYXR0ZXJzLCB3aGljaCBhcmUgY292ZXJlZCBieSBGZWRlcmFsIGxhdywgYW5kIGl0cyBwcmluY2lwYWxzIG9mIGNvbmZsaWN0IG9mIGxhd3MsIHNoYWxsIGdvdmVybiB0aGlzIEFncmVlbWVudC4gVGhpcyBBZ3JlZW1lbnQgd2lsbCBub3QgYmUgZ292ZXJuZWQgYnkgdGhlIGNvbmZsaWN0IG9mIGxhdyBydWxlcyBvZiBhbnkganVyaXNkaWN0aW9uIG9yIHRoZSBVbml0ZWQgTmF0aW9ucyBDb252ZW50aW9uIG9mIENvbnRyYWN0cyBmb3IgdGhlIFNhbGUgb2YgR29vZHMuIFRoZSBwYXJ0aWVzIGhlcmVieSBjb25zZW50IHRvIHRoZSBleGNsdXNpdmUgcGVyc29uYWwganVyaXNkaWN0aW9uIG9mIGFuZCB2ZW51ZSBpbiBhIGNvdXJ0IG9mIGNvbXBldGVudCBqdXJpc2RpY3Rpb24gbG9jYXRlZCBpbiBTYW50YSBDbGFyYSBDb3VudHkgaXMgdGhlIFN0YXRlIG9mIENhbGlmb3JuaWEuIEFueSBjYXVzZSBvZiBhY3Rpb24gb3IgY2xhaW0gd2l0aCByZXNwZWN0IHRvIHRoZSBTb2Z0d2FyZSBwcm92aWRlZCB1bmRlciB0aGlzIEFncmVlbWVudCBtdXN0IGJlIGNvbW1lbmNlZCB3aXRoaW4gb25lICgxKSB5ZWFyIGFmdGVyIHRoZSBjbGFpbSBvciBjYXVzZSBvZiBhY3Rpb24gYXJpc2VzIG9yIHN1Y2ggY2xhaW0gb3IgY2F1c2Ugb2YgYWN0aW9uIGlzIGJhcnJlZC4gU2hvdWxkIGFueSBwcm92aXNpb24gb2YgdGhpcyBBZ3JlZW1lbnQgYmUgZGVjbGFyZWQgdW5lbmZvcmNlYWJsZSBieSBhIGNvdXJ0IG9mIGNvbXBldGVudCBqdXJpc2RpY3Rpb24sIHRoZW4gc3VjaCBwcm92aXNpb24gc2hhbGwgYmUgZGVlbWVkIHNldmVyYWJsZSBmcm9tIHRoaXMgQWdyZWVtZW50IGFuZCBjaGFuZ2VkIGFuZCBpbnRlcnByZXRlZCBzbyBhcyB0byBiZXN0IGFjY29tcGxpc2ggdGhlIG9iamVjdGl2ZXMgb2YgdGhlIG9yaWdpbmFsIHByb3Zpc2lvbiB0byB0aGUgZnVsbGVzdCBleHRlbnQgYWxsb3dlZCBieSBsYXcuIFN1Y2ggYW4gZXZlbnQgc2hhbGwgbm90IGFmZmVjdCB0aGUgcmVtYWluZGVyIGhlcmVvZiBhbmQgdGhlIHJlbWFpbmluZyBwcm92aXNpb25zIHNoYWxsIHJlbWFpbiBpbiBmdWxsIGZvcmNlIGFuZCBlZmZlY3QuIFNVUEVSTUlDUk8gcmVzZXJ2ZXMgYWxsIHJpZ2h0cyBpbiB0aGUgU29mdHdhcmUgbm90IHNwZWNpZmljYWxseSBncmFudGVkIGluIHRoaXMgQWdyZWVtZW50LiBUaGUgTGljZW5zZWUgYWdyZWVzIHRvIGluZGVtbmlmeSwgZGVmZW5kIGFuZCBob2xkIFNVUEVSTUlDUk8gaGFybWxlc3MgZnJvbSBhbnkgYW5kIGFsbCBleHBlbnNlcywganVkZ21lbnRzLCBwZW5hbHRpZXMsIG9yIG90aGVyIGxpYWJpbGl0aWVzIGJ5IHJlYXNvbiBvZiBpdHMgZmFpbHVyZSB0byBjb21wbHkgd2l0aCBhbnkgcHJvdmlzaW9ucyB1bmRlciB0aGlzIEFncmVlbWVudC48YnI%2BPGJyPjxiPjkuPC9iPiBFeHBvcnQgUmVndWxhdGlvbnMuIEFsbCBTb2Z0d2FyZSBhbmQgdGVjaG5pY2FsIGRhdGEgZGVsaXZlcmVkIHVuZGVyIHRoaXMgTGljZW5zZSBhcmUgc3ViamVjdCB0byBVLlMuIGV4cG9ydCBjb250cm9sIGxhd3MgYW5kIG1heSBiZSBzdWJqZWN0IHRvIGV4cG9ydCBvciBpbXBvcnQgcmVndWxhdGlvbnMgaW4gb3RoZXIgY291bnRyaWVzLiBZb3UgbWF5IG5vdCB1c2Ugb3Igb3RoZXJ3aXNlIGV4cG9ydCBvciByZS1leHBvcnQgdGhlIFNvZnR3YXJlIGV4Y2VwdCBhcyBhdXRob3JpemVkIGJ5IFUuUy4gbGF3IGFuZCB0aGUgbGF3cyBvZiB0aGUganVyaXNkaWN0aW9uIGluIHdoaWNoIHRoZSBTb2Z0d2FyZSB3YXMgb2J0YWluZWQuIFlvdSBhZ3JlZSB0byBjb21wbHkgc3RyaWN0bHkgd2l0aCBhbGwgc3VjaCBsYXdzIGFuZCByZWd1bGF0aW9ucyBhbmQgYWNrbm93bGVkZ2UgdGhhdCB0aGUgU29mdHdhcmUgbWF5IG5vdCBiZSBleHBvcnRlZCBvciByZS1leHBvcnRlZCAoaSkgaW50byAob3IgdG8gYSBuYXRpb25hbCBvciByZXNpZGVudCBvZikgYW55IFUuUy4gZW1iYXJnb2VkIGNvdW50cnkgb3IgKGlpKSB0byBhbnlvbmUgb24gdGhlIFUuUy4gVHJlYXN1cnkgRGVwYXJ0bWVudCdzIGxpc3Qgb2YgU3BlY2lhbGx5IERlc2lnbmF0ZWQgTmF0aW9uYWxzIG9yIHRoZSBVLlMuIENvbW1lcmNlIERlcGFydG1lbnQncyBUYWJsZSBvZiBEZW5pYWwgT3JkZXJzIChlYWNoLCBhICJMaXN0IikuIEJ5IHVzaW5nIHRoZSBTb2Z0d2FyZSwgeW91IHJlcHJlc2VudCBhbmQgd2FycmFudHkgdGhhdCB5b3UgYXJlIG5vdCBsb2NhdGVkIGluLCB1bmRlciB0aGUgY29udHJvbCBvZiwgb3IgYSBuYXRpb25hbCBvciByZXNpZGVudCBvZiBhbnkgc3VjaCBjb3VudHJ5IG9yIG9uIGFueSBzdWNoIExpc3QuPGJyPjxicj48Yj4xMC48L2I%2BIEFja25vd2xlZGdtZW50IGFuZCBFeGNsdXNpdml0eS4gTElDRU5TRUUgQUNLTk9XTEVER0VTIFRIQVQgSVQgSEFTIFJFQUQgVEhJUyBBR1JFRU1FTlQsIFVOREVSU1RBTkQgSVQsIEFORCBBR1JFRSBUTyBCRSBCT1VORCBCWSBJVFMgVEVSTVMgQU5EIENPTkRJVElPTlMuIExJQ0VOU0VFIEZVUlRIRVIgQUdSRUVTIFRIQVQgSVQgSVMgVEhFIENPTVBMRVRFIEFORCBFWENMVVNJVkUgU1RBVEVNRU5UIE9GIFRIRSBBR1JFRU1FTlQgQkVUV0VFTiBVUyBXSElDSCBTVVBFUkNFREVTIEFOWSBQUk9QT1NBTCBPUiBQUklPUiBBR1JFRU1FTlQsIE9SQUwgT1IgV1JJVFRFTiwgQU5EIEFOWSBPVEhFUiBDT01NVU5JQ0FUSU9OUyBCRVRXRUVOIFRIRSBQQVJUSUVTIFJFTEFUSU5HIFRPIFRIRSBTVUJKRUNUIE1BVFRFUiBPRiBUSElTIEFHUkVFTUVOVC4gTm8gcHJvdmlzaW9uIGFwcGVhcmluZyBvbiBhbnkgZm9ybSBvcmlnaW5hdGVkIGJ5IExpY2Vuc2VlIHNoYWxsIGJlIGFwcGxpY2FibGUgb3IgaGF2ZSBhbnkgZm9yY2Ugb3IgZWZmZWN0IHVubGVzcyBzdWNoIHByb3Zpc2lvbiBpcyBleHByZXNzbHkgYWNjZXB0ZWQgaW4gd3JpdGluZyBieSBhbiBvZmZpY2VyIG9mIFNVUEVSTUlDUk8uIFRoaXMgQWdyZWVtZW50IGNhbm5vdCBiZSBtb2RpZmllZCBieSBwdXJjaGFzZSBvcmRlcnMgb3Igb3RoZXIgZm9ybXMsIGFkdmVydGlzZW1lbnRzLCBvciBvcmFsIG9yIHdyaXR0ZW4gcmVwcmVzZW50YXRpb25zIG9mIHJlcHJlc2VudGF0aXZlcyBvZiBMaWNlbnNlZSBvciBTVVBFUk1JQ1JPLCBvciBhbnlvbmUgZWxzZSwgdW5sZXNzIGEgd3JpdHRlbiBhbWVuZG1lbnQgaGFzIGJlZW4gc2lnbmVkIGJ5IGEgU1VQRVJNSUNSTyBvZmZpY2VyLh8CAoACZGQCCw9kFgICAQ88KwAJAQAPFgIeDU5ldmVyRXhwYW5kZWRnZGQCDQ9kFgICAQ88KwAJAQAPFgIfB2dkZAIPD2QWAgIBDzwrAAkBAA8WAh8HZ2RkAhEPDxYCHwZnZBYCAgEPPCsACQIADxYGHwdkHgxTZWxlY3RlZE5vZGVkHglMYXN0SW5kZXgCAWQIFCsAAmQUKwACFgQeC05hdmlnYXRlVXJsBR9odHRwczovL3d3dy5zdXBlcm1pY3JvLkNPTS9TTVMvHghFeHBhbmRlZGdkZAITD2QWAgIBDzwrAAkBAA8WAh8HZ2RkGAIFHl9fQ29udHJvbHNSZXF1aXJlUG9zdEJhY2tLZXlfXxYBBRljdGwwMCRUcmVlVmlld19CYWNrVG9TTUNJBRljdGwwMCRDUENlbnRlciRNeUdyaWRWaWV3DzwrAAoBCAIBZFM7RT9ievmsMJ19IaoIL%2FSBSZ8F \
-d __EVENTVALIDATION=%2FwEWCgLjmrVrAuu16p0LAoSHs%2B4FArPZkrwOAuufmJ8CAorVlKcCAsOfxJoHAsOi088PAtrZ2p0MAtrZ7uYF%2BydZu57YwuBjwUnc03S%2FokDHp6s%3D \
-d ctl00%24CPCenter%24Hidden_RequestType=0 \
--compressed -o %o"
)

package() {
	cd sum_"$pkgver"_Linux_x86_64
	
	install -D sumrc.sample "$pkgdir/etc/sumrc"
	sed -i '1{s|.*|# To use this config invoke supermicro-update-manager with --rc_path=/etc/sumrc.|}' "$pkgdir/etc/sumrc"
	sed -i '2{s|.*|# Alternatively, copy this file as .sumrc to your home directory or use needed parameters directly via command line.|}' "$pkgdir/etc/sumrc"
	
	# sum_bios.ko only needed if InBand SMI E7h support is not implemented in BIOS. I have not seen such systems, but if you have, please contact me and I will edit pkgbuild.
	# ExternalData folder contains SMCIPID.txt, tui.fnt, VENID.txt. I do not know when they are used, so did not packaged them.
	
	install -D SUM_UserGuide.pdf "$pkgdir/usr/share/doc/supermicro-update-manager/SUM_UserGuide.pdf"
	install -Dm755 sum "$pkgdir/usr/bin/supermicro-update-manager" # rename executable file to not conflict with gnu sum.
}
