# Generated by debtap
# Maintainer: TheK0tYaRa
pkgname=myoffice-standard-home-edition-bin
# The version doesn't matter as it always installs latest
pkgver=1.28.0.4
pkgrel=2022.01
pkgdesc="A set of office applications for creating text and spreadsheet documents. Home edition."
arch=('x86_64')
url="https://myoffice.ru/products/standard-home-edition/"
license=('EULA')
groups=('myoffice')
depends=('abseil-cpp' 'cuneiform' 'curl' 'expat' 'fontconfig' 'freetype2' 'glib2' 'hunspell' 'krb5'
	'libcups' 'libglvnd' 'libpng12' 'libpulse' 'libx11' 'libxcb' 'libxext' 'libxkbcommon' 'libxkbcommon-x11'
	'libxrender' 'libzip' 'link-grammar' 'lua' 'mono' 'openssl' 'pixman' 'qt5-base' 'qt5-multimedia'
	'qt5-svg' 'tidy' 'xalan-c' 'xerces-c' 'zlib')
options=('!strip' '!emptydirs')
install=${pkgname}.install
# source_i686=("PUT_FULL_URL_FOR_DOWNLOADING_i386_DEB_PACKAGE_HERE")
source_x86_64=("$( echo $( curl -s 'https://myoffice.ru/products/standard-home-edition/' | grep '.deb' | sed 's/.\+<a href=\"\|\" .\+//g' ) | cut -d ' ' -f 1 )")
# sha512sums_i686=('PUT_SHA512SUM_OF_i386_DEB_PACKAGE_HERE')
sha512sums_x86_64=('649ba6ab13ec37be835ab83474ccff8d9991ca49ca17b8344011a8b9ce01891ba782bac5012a78e15ca340b8e2233e53c2eb478977c9adc946efc35a13122195')
package(){
	# Extract package data
	tar xzf data.tar.gz -C "${pkgdir}"
	# Fix directory structure differences
	cd "${pkgdir}"
	install -D -m644 "./usr/local/bin/myoffice-standard-home-edition/Resources/UI/tt/LicenseAgreements.rcc" "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
	mkdir usr/bin 2> /dev/null; mv usr/local/bin/* usr/bin; rm -rf usr/local/bin
	rm -rf usr/local
	cd ..
}
