# Generated by debtap
# Maintainer: Alex
# Contributor: Alex
pkgname=('opentx-companion-bin')
pkgver=2.2.3
pkgrel=1
pkgdesc="Models and settings editor for the OpenTX open source firmware."
arch=('x86_64')
url="http://www.open-tx.org/"
license=('GPL')
depends=('hicolor-icon-theme' 'qt5-base>=5.7.0' 'qt5-multimedia>=5.6.0beta' 'qt5-svg>=5.6.0beta' 'sdl>=1.2.11')
options=('!strip' '!emptydirs')
install=${pkgname}.install
source_x86_64=("https://downloads.open-tx.org/2.2/release/companion/linux/companion22_${pkgver}_amd64.deb")
sha512sums_x86_64=('a4f68062b0a86d07f9fe7541f7c4e383e050baef058b8de8294ee18fc365dbfe5ffe5bece5d8c430a822a0096282eb454c08cd5fa72e1af8b66afeac68695868')

package(){

	# Extract package data
	tar xzf data.tar.gz -C "${pkgdir}"

	# Fix directories structure differencies
	cd "${pkgdir}"

	mkdir usr/bin 2> /dev/null; mv usr/local/bin/* usr/bin; rm -rf usr/local/bin
	sed -i -e 's:^Exec=/usr/local/bin/:Exec=/usr/bin/:g' "usr/share/applications/companion22.desktop"
	sed -i -e 's:^Exec=/usr/local/bin/:Exec=/usr/bin/:g' "usr/share/applications/simulator22.desktop"
	mkdir -p usr/lib 2> /dev/null; mv lib/* usr/lib; rm -rf lib
	mv usr/local/lib/* usr/lib; rm -rf usr/local/lib

	cd ..

}
