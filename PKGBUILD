# Generated by pakanton
# Maintainer: Branislav Hol√Ω <branoholy@gmail.com>
pkgbase='regilo'
pkgname=('regilo' 'regilo-lib')
pkgver='2.4.1'
pkgrel='1'
pkgdesc='A simple C++ library for controlling the Neato XV robot and the Hokuyo scanner'
arch=('i686' 'x86_64' 'arm' 'armv6h' 'armv7h' 'aarch64')
url='https://github.com/branoholy/regilo'
license=('GPL3')
makedepends=('cmake>=2.8' 'boost>=1.54')
source=("https://github.com/branoholy/regilo/archive/v$pkgver/regilo-$pkgver.tar.gz"
        "https://github.com/branoholy/regilo/releases/download/v$pkgver/regilo-$pkgver.tar.gz.sig")
md5sums=('6be2afc76807b3f22b14b56e4319c9e5'
         '2efef1234822b1e136273261c069d216')
sha1sums=('faccb07a2fad0be33456c170e26c2303e2d2cd97'
          '42d92f91dc15301a25e2cdb524ae59e12f46ba28')
sha256sums=('6cc6677f0de46c7783219cdcf2239cf02d54cee61dc60cf1c27674c6ac517c02'
            'a866ea910811c0e7d62441ddcb34d3bd6e61809920c260f194375660ec420442')
sha512sums=('7923162f94869026ac206a4918feefb577bb0f2bf24f3d49a23613b88df476b4f70555c162afcba866cd1483f6e143e9c182b74b38a57106c30514a9ae2f1df0'
            'e431a9628c670b03736460d4fea26988d27d51e93f16e41c373e053b5d0c04d45da3bff0c8b8a131a3853dc00026b514b0dffdea215c521794be7e2ec46d282c')
validpgpkeys=('D25809BF3563AA56A12B0F4D545EDD46FBAC61E6')

build() {
	cd $pkgbase-$pkgver

	mkdir -p builds/regilo && cd builds/regilo
	cmake -Dbuild-library:bool=on -Dinstall-headers:bool=on -Dexample:bool=on -DCMAKE_INSTALL_PREFIX=/usr ../..

	mkdir -p ../regilo-lib && cd ../regilo-lib
	cmake -Dinstall-library:bool=on -DCMAKE_INSTALL_PREFIX=/usr ../..
	rm -r CMakeFiles/regilo.dir/src CMakeFiles/regilo.dir/gen
	ln -s ../../../regilo/CMakeFiles/regilo.dir/src/ CMakeFiles/regilo.dir/src
	ln -s ../../../regilo/CMakeFiles/regilo.dir/gen/ CMakeFiles/regilo.dir/gen

	cd ../regilo
	make

	cd ../regilo-lib
	make
}

package_regilo() {
	pkgdesc='A simple C++ library for controlling the Neato XV robot and the Hokuyo scanner - development headers'
	depends=('boost>=1.54' "regilo-lib=$pkgver")

	cd regilo-$pkgver/builds/$pkgname
	make DESTDIR="$pkgdir/" install
}

package_regilo-lib() {
	pkgdesc='A simple C++ library for controlling the Neato XV robot and the Hokuyo scanner - runtime library'
	depends=('boost-libs>=1.54')

	cd regilo-$pkgver/builds/$pkgname
	make DESTDIR="$pkgdir/" install
}
