From af55af09c1e005dbb44c19a9d5fd2d281e979231 Mon Sep 17 00:00:00 2001
From: Julian Orth <ju.orth@gmail.com>
Date: Sat, 14 Aug 2021 01:13:11 +0200
Subject: [PATCH] Re-enable non-subpixel hinting

---
 gtk/gtksettings.c | 2 +-
 gtk/gtkwidget.c   | 3 ---
 2 files changed, 1 insertion(+), 4 deletions(-)

diff --git a/gtk/gtksettings.c b/gtk/gtksettings.c
index b88c6ea37d..c38d647046 100644
--- a/gtk/gtksettings.c
+++ b/gtk/gtksettings.c
@@ -1691,7 +1691,7 @@ settings_update_font_options (GtkSettings *settings)
 
   settings->font_options = cairo_font_options_create ();
 
-  cairo_font_options_set_hint_metrics (settings->font_options, CAIRO_HINT_METRICS_OFF);
+  cairo_font_options_set_hint_metrics (settings->font_options, CAIRO_HINT_METRICS_ON);
 
   hint_style = CAIRO_HINT_STYLE_DEFAULT;
   if (hinting == 0)
diff --git a/gtk/gtkwidget.c b/gtk/gtkwidget.c
index d4b6ad5191..f3087dc5c1 100644
--- a/gtk/gtkwidget.c
+++ b/gtk/gtkwidget.c
@@ -6468,9 +6468,6 @@ update_pango_context (GtkWidget    *widget,
   pango_context_set_font_description (context, font_desc);
   pango_font_description_free (font_desc);
 
-  if (cairo_version () >= CAIRO_VERSION_ENCODE (1, 17, 4))
-    pango_context_set_round_glyph_positions (context, FALSE);
-
   pango_context_set_base_dir (context,
                               _gtk_widget_get_direction (widget) == GTK_TEXT_DIR_LTR ?
                               PANGO_DIRECTION_LTR : PANGO_DIRECTION_RTL);
-- 
2.32.0

