diff -rupN a/include/swift/Reflection/TypeRef.h b/include/swift/Reflection/TypeRef.h
--- a/include/swift/Reflection/TypeRef.h	2018-11-06 08:47:44.273606680 -0800
+++ b/include/swift/Reflection/TypeRef.h	2018-11-06 08:48:57.184403605 -0800
@@ -48,12 +48,12 @@ enum class TypeRefKind {
 
 #define FIND_OR_CREATE_TYPEREF(Allocator, TypeRefTy, ...)                      \
   auto ID = Profile(__VA_ARGS__);                                              \
-  const auto Entry = Allocator.DEPENDENT_TEMPLATE TypeRefTy##s.find(ID);       \
-  if (Entry != Allocator.DEPENDENT_TEMPLATE TypeRefTy##s.end())                \
+  const auto Entry = Allocator.TypeRefTy##s.find(ID);       \
+  if (Entry != Allocator.TypeRefTy##s.end())                \
     return Entry->second;                                                      \
   const auto TR =                                                              \
       Allocator.DEPENDENT_TEMPLATE makeTypeRef<TypeRefTy>(__VA_ARGS__);        \
-  Allocator.DEPENDENT_TEMPLATE TypeRefTy##s.insert({ID, TR});                  \
+  Allocator.TypeRefTy##s.insert({ID, TR});                  \
   return TR;
 
 /// An identifier containing the unique bit pattern made up of all of the
