From bb7e233333ad12ff33576bed2eb558f3278f9e9c Mon Sep 17 00:00:00 2001
From: Maximilian Janik <maximilian@janik.xyz>
Date: Wed, 30 May 2018 16:24:34 +0200
Subject: [PATCH] Fix for Qt 5.11

---
 CMakeLists.txt                | 9 +++------
 src/ui/private-share-dialog.h | 1 +
 2 files changed, 4 insertions(+), 6 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index f2395e404..381af60b2 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -799,17 +799,14 @@ TARGET_LINK_LIBRARIES(seafile-applet
   ${EXTRA_LIBS}
 )
 
-QT5_USE_MODULES(seafile-applet Core Gui Widgets Network)
+target_link_libraries(seafile-applet Qt5::Core Qt5::Gui Qt5::Widgets Qt5::Network)
 IF (BUILD_SHIBBOLETH_SUPPORT)
-QT5_USE_MODULES(seafile-applet ${WEBKIT_NAME} ${WEBKIT_WIDGETS_NAME})
+target_link_libraries(seafile-applet Qt5::WebEngine Qt5::WebEngineWidgets)
 ENDIF()
 
 ## QtBus
 IF (${CMAKE_SYSTEM_NAME} MATCHES "Linux" OR ${CMAKE_SYSTEM_NAME} MATCHES "BSD")
-  TARGET_LINK_LIBRARIES(seafile-applet
-    ${QT_QTDBUS_LIBRARIES}
-  )
-  QT5_USE_MODULES(seafile-applet ${USE_QT_LIBRARIES})
+  target_link_libraries(seafile-applet Qt5::DBus)
 ENDIF()
 
 ### Xcode-related, build as a osx bundle
diff --git a/src/ui/private-share-dialog.h b/src/ui/private-share-dialog.h
index 427958ea2..4cbcbdbc4 100644
--- a/src/ui/private-share-dialog.h
+++ b/src/ui/private-share-dialog.h
@@ -12,6 +12,7 @@
 #include <QStringList>
 #include <QStyledItemDelegate>
 #include <QTableView>
+#include <QHeaderView>
 #include "ui_private-share-dialog.h"
 
 #include "account.h"
