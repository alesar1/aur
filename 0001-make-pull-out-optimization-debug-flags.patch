From 362a8aacc54561f3c39995f64a7f9465ef6889fa Mon Sep 17 00:00:00 2001
From: Cody P Schafer <dev@codyps.com>
Date: Mon, 29 Oct 2018 22:36:58 -0400
Subject: [PATCH 1/3] make: pull out optimization & debug flags

Packagers generally want full control of optimization & debug options.
Provide that by making the current `-g` and `-Os` flags the default
content of `CFLAGS` (any value of `CFLAGS` env will override).
---
 Makefile | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/Makefile b/Makefile
index 639bf40..4c4d1c5 100755
--- a/Makefile
+++ b/Makefile
@@ -152,7 +152,8 @@ PAHO_C_SUB_TARGET = ${blddir}/samples/${PAHO_C_SUB_NAME}
 PAHO_CS_PUB_TARGET = ${blddir}/samples/${PAHO_CS_PUB_NAME}
 PAHO_CS_SUB_TARGET = ${blddir}/samples/${PAHO_CS_SUB_NAME}
 
-CCFLAGS_SO = -g -fPIC $(CFLAGS) -Os -Wall -fvisibility=hidden -I$(blddir_work) 
+CFLAGS ?= -g -Os
+CCFLAGS_SO = -fPIC -Wall -fvisibility=hidden -I$(blddir_work) $(CFLAGS)
 FLAGS_EXE = $(LDFLAGS) -I ${srcdir} -lpthread -L ${blddir}
 FLAGS_EXES = $(LDFLAGS) -I ${srcdir} ${START_GROUP} -lpthread -lssl -lcrypto ${END_GROUP} -L ${blddir}
 
-- 
2.19.1

