FROM docker.ascelion.com/iot-arch

ARG PASSWORD
RUN echo "machine arch.ascelion.com login iot-talkd password $PASSWORD" >/root/.netrc
RUN pacman -Syu --noconfirm
RUN pacman -S --needed --noconfirm jdk8-openjdk

RUN useradd -u 1000 -m build
RUN echo "build ALL=(ALL) NOPASSWD: ALL" >/etc/sudoers.d/build
VOLUME /home/build

ENTRYPOINT ["tail", "-f", "/dev/null"]

ADD aliases.sh /etc/profile.d

