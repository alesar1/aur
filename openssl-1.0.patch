From 19207efc5cd56b4b8f39e8fa0dcb92afb8d70d43 Mon Sep 17 00:00:00 2001
From: Pascal Ernster <git@hardfalcon.net>
Date: Mon, 20 Feb 2017 02:17:08 +0100
Subject: [PATCH] Add @SSL_CFLAGS@ to Makefiles to support PKG_CONFIG_PATH and
 PKG_CONFIG_LIBDIR environment variables for libcrypto and libssl

---
 lib/Makefile.am        | 4 +++-
 net/server/Makefile.am | 1 +
 tools/Makefile.am      | 2 +-
 3 files changed, 5 insertions(+), 2 deletions(-)

diff --git a/lib/Makefile.am b/lib/Makefile.am
index f744675..b414b26 100644
--- a/lib/Makefile.am
+++ b/lib/Makefile.am
@@ -30,7 +30,7 @@ noinst_HEADERS = buffer.h \
 ccnetincludedir = $(includedir)/ccnet
 ccnetinclude_DATA = ccnet-object.h
 
-libccnet_la_CPPFLAGS = $(AM_CPPFLAGS) -DCCNET_LIB @PTHREAD_CFLAGS@
+libccnet_la_CPPFLAGS = $(AM_CPPFLAGS) -DCCNET_LIB @PTHREAD_CFLAGS@ @SSL_CFLAGS@
 
 libccnet_la_SOURCES = ccnet-client.c packet-io.c libccnet_utils.c \
 	message.c proc-factory.c \
@@ -54,6 +54,8 @@ libccnet_la_LIBADD = @PTHREAD_LIBS@ @GLIB2_LIBS@ @GOBJECT_LIBS@ @LIB_GDI32@ \
 
 noinst_LTLIBRARIES = libccnetd.la
 
+libccnetd_la_CPPFLAGS = $(AM_CPPFLAGS) @SSL_CFLAGS@
+
 libccnetd_la_SOURCES = utils.c db.c job-mgr.c \
 	rsa.c bloom-filter.c marshal.c net.c timer.c ccnet-session-base.c \
 	ccnetobj.c
diff --git a/tools/Makefile.am b/tools/Makefile.am
index 61d0482..7d36040 100644
--- a/tools/Makefile.am
+++ b/tools/Makefile.am
@@ -1,5 +1,5 @@
 
-AM_CPPFLAGS = -I$(top_srcdir)/include @GLIB2_CFLAGS@ -I$(top_srcdir)/lib
+AM_CPPFLAGS = -I$(top_srcdir)/include @GLIB2_CFLAGS@ -I$(top_srcdir)/lib @SSL_CFLAGS@
 
 bin_PROGRAMS = ccnet-init
 
