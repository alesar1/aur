diff --git a/src/wlserver.cpp b/src/wlserver.cpp
index 7830b7a..78e25c7 100644
--- a/src/wlserver.cpp
+++ b/src/wlserver.cpp
@@ -25,6 +25,7 @@ extern "C" {
 #include <wlr/backend/libinput.h>
 #include <wlr/interfaces/wlr_pointer.h>
 #include <wlr/render/wlr_renderer.h>
+#include <wlr/types/wlr_touch.h>
 #include <wlr/xwayland.h>
 #include <wlr/util/log.h>
 #undef static
@@ -135,7 +136,7 @@ static void wlserver_handle_key(struct wl_listener *listener, void *data)
 	xkb_keycode_t keycode = event->keycode + 8;
 	xkb_keysym_t keysym = xkb_state_key_get_one_sym(keyboard->device->keyboard->xkb_state, keycode);
 
-	if (wlserver.wlr.session && event->state == WLR_KEY_PRESSED && keysym >= XKB_KEY_XF86Switch_VT_1 && keysym <= XKB_KEY_XF86Switch_VT_12) {
+	if (wlserver.wlr.session && event->state == WL_KEYBOARD_KEY_STATE_PRESSED && keysym >= XKB_KEY_XF86Switch_VT_1 && keysym <= XKB_KEY_XF86Switch_VT_12) {
 		unsigned vt = keysym - XKB_KEY_XF86Switch_VT_1 + 1;
 		wlr_session_change_vt(wlserver.wlr.session, vt);
 		return;
