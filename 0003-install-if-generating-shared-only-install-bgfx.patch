From bf668bfed4ae56d4efcd7013f9e93eed21c0c2f5 Mon Sep 17 00:00:00 2001
From: Sandy Carter <bwrsandman@gmail.com>
Date: Sat, 30 Jan 2021 20:52:41 -0500
Subject: [PATCH 3/4] install: if generating shared, only install bgfx

---
 CMakeLists.txt | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 4412be1..ca72939 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -122,13 +122,22 @@ if( BGFX_INSTALL )
 	install(FILES ${BGFX_DIR}/LICENSE DESTINATION ${CMAKE_INSTALL_DOCDIR})
 	install(FILES README.md DESTINATION ${CMAKE_INSTALL_DOCDIR})
 
-	install( TARGETS bgfx bimg bx astc-codec astc edtaa3 etc1 etc2 iqa squish nvtt pvrtc
+	install( TARGETS bgfx
 			 EXPORT "${TARGETS_EXPORT_NAME}"
 			 LIBRARY DESTINATION "${CMAKE_INSTALL_LIBDIR}"
 			 ARCHIVE DESTINATION "${CMAKE_INSTALL_LIBDIR}"
 			 RUNTIME DESTINATION "${CMAKE_INSTALL_BINDIR}"
 			 INCLUDES DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}"
 	)
+	if( NOT BGFX_LIBRARY_TYPE MATCHES "SHARED" )
+		install( TARGETS bimg bx astc-codec astc edtaa3 etc1 etc2 iqa squish nvtt pvrtc
+				 EXPORT "${TARGETS_EXPORT_NAME}"
+				 LIBRARY DESTINATION "${CMAKE_INSTALL_LIBDIR}"
+				 ARCHIVE DESTINATION "${CMAKE_INSTALL_LIBDIR}"
+				 RUNTIME DESTINATION "${CMAKE_INSTALL_BINDIR}"
+				 INCLUDES DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}"
+		)
+	endif()
     if (BGFX_CONFIG_RENDERER_WEBGPU)
 		install( TARGETS webgpu
 				 EXPORT "${TARGETS_EXPORT_NAME}"
-- 
2.30.0

