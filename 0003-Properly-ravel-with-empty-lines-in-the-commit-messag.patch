From 246cc42ea1c1fcf782ba7d446d65518044fb17c8 Mon Sep 17 00:00:00 2001
From: Mike Swanson <mikeonthecomputer@gmail.com>
Date: Wed, 7 Oct 2015 21:04:02 -0700
Subject: [PATCH 3/3] Properly ravel with empty lines in the commit message.

These would not round-trip before, since the blank lines got squashed.
---
 git-weave   |  2 ++
 tests/bs.fi | 12 +++++++++++-
 2 files changed, 13 insertions(+), 1 deletion(-)

diff --git a/git-weave b/git-weave
index a6c278b..e21e886 100755
--- a/git-weave
+++ b/git-weave
@@ -286,6 +286,8 @@ def git_ravel(indir, outdir, quiet=False):
                     if line[0].isspace():
                         if line.startswith(" " * 4):
                             line = line[4:]
+                            if line == "\n":
+                                body_latch = False
                             # Old-school byte stuffing.
                             if line.startswith("."):
                                 line = "." + line
