*** a/misc.c	2019-10-29 11:35:05.000000000 +0300
--- b/misc.c	2020-04-06 00:25:45.246007990 +0300
***************
*** 154,160 ****
  	} while (0)
  
  /* Linear day numbers of the respective 1sts in non-leap years. */
! static time_t accum_days_in_year[] = {
  	/* Month : N 01  02  03  04  05  06  07  08  09  10  11  12 */
  	0, 0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334, 0, 0, 0,
  };
--- 154,160 ----
  	} while (0)
  
  /* Linear day numbers of the respective 1sts in non-leap years. */
! static time64_t accum_days_in_year[] = {
  	/* Month : N 01  02  03  04  05  06  07  08  09  10  11  12 */
  	0, 0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334, 0, 0, 0,
  };
***************
*** 163,170 ****
  void exfat_time_fat2unix(struct exfat_sb_info *sbi, struct timespec_compat *ts,
  		DATE_TIME_T *tp)
  {
! 	time_t year = tp->Year;
! 	time_t ld; /* leap day */
  
  	MAKE_LEAP_YEAR(ld, year);
  
--- 163,170 ----
  void exfat_time_fat2unix(struct exfat_sb_info *sbi, struct timespec_compat *ts,
  		DATE_TIME_T *tp)
  {
! 	time64_t year = tp->Year;
! 	time64_t ld; /* leap day */
  
  	MAKE_LEAP_YEAR(ld, year);
  
***************
*** 186,194 ****
  void exfat_time_unix2fat(struct exfat_sb_info *sbi, struct timespec_compat *ts,
  		DATE_TIME_T *tp)
  {
! 	time_t second = ts->tv_sec;
! 	time_t day, month, year;
! 	time_t ld; /* leap day */
  
  	if (!sbi->options.tz_utc)
  		second -= sys_tz.tz_minuteswest * SECS_PER_MIN;
--- 186,194 ----
  void exfat_time_unix2fat(struct exfat_sb_info *sbi, struct timespec_compat *ts,
  		DATE_TIME_T *tp)
  {
! 	time64_t second = ts->tv_sec;
! 	time64_t day, month, year;
! 	time64_t ld; /* leap day */
  
  	if (!sbi->options.tz_utc)
  		second -= sys_tz.tz_minuteswest * SECS_PER_MIN;
