From 016245420bfc0a344ddc220cef449e732f8c6a06 Mon Sep 17 00:00:00 2001
From: Jan Cholasta <jcholast@redhat.com>
Date: Tue, 2 Aug 2016 13:49:36 +0200
Subject: [PATCH] client install: do not assume /etc/krb5.conf.d exists

---
 client/ipa-client-install | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/client/ipa-client-install b/client/ipa-client-install
index 74d5d8aae66877dfee9436227bd6c47b7f0fb204..0bbfdab7701c7a6200d087c06d1bdc0559c4433c 100755
--- a/client/ipa-client-install
+++ b/client/ipa-client-install
@@ -1076,8 +1076,10 @@ def configure_krb5_conf(cli_realm, cli_domain, cli_server, cli_kdc, dnsok,
     krbconf.setIndent(("","  ","    "))
 
     opts = [{'name':'comment', 'type':'comment', 'value':'File modified by ipa-client-install'},
-            {'name':'empty', 'type':'empty'},
-            {'name':'includedir', 'type':'option', 'value':paths.COMMON_KRB5_CONF_DIR, 'delim':' '}]
+            {'name':'empty', 'type':'empty'}]
+
+    if os.path.exists(paths.COMMON_KRB5_CONF_DIR):
+        opts.append({'name':'includedir', 'type':'option', 'value':paths.COMMON_KRB5_CONF_DIR, 'delim':' '})
 
     # SSSD include dir
     if options.sssd:
-- 
2.11.0

