From 48241ff38192fd1310ec7ab6ac9179e0269ab1de Mon Sep 17 00:00:00 2001
From: Hugo Courtial <hugo@courtial.me>
Date: Sat, 20 Aug 2016 23:12:38 +0200
Subject: [PATCH] GCC6 patches

---
 Support/Library/ofxsImageEffect.cpp  | 32 ++++++++++++++++----------------
 Support/Library/ofxsSupportPrivate.h | 12 ++++++------
 2 files changed, 22 insertions(+), 22 deletions(-)

diff --git a/Support/Library/ofxsImageEffect.cpp b/Support/Library/ofxsImageEffect.cpp
index efad2bf..84b55c3 100644
--- a/Support/Library/ofxsImageEffect.cpp
+++ b/Support/Library/ofxsImageEffect.cpp
@@ -3190,8 +3190,8 @@ namespace OFX {
       {
         OFX::Private::VersionIDKey key;
         key.id = id;
-        key.major = majorVersion;
-        key.minor = minorVersion;
+        key.major_version = majorVersion;
+        key.minor_version = minorVersion;
         EffectDescriptorMap::iterator it = gEffectDescriptors.find(key);
         EffectContextMap& toBeDeleted = it->second;
         for(EffectContextMap::iterator it2 = toBeDeleted.begin(); it2 != toBeDeleted.end(); ++it2)
@@ -3594,8 +3594,8 @@ namespace OFX {
       // make a roi setter object
       OFX::Private::VersionIDKey key;
       key.id = plugname;
-      key.major = majorVersion;
-      key.minor = minorVersion;
+      key.major_version = majorVersion;
+      key.minor_version = minorVersion;
       ActualROISetter setRoIs(outArgs, gEffectDescriptors[key][effectInstance->getContext()]->getClipROIPropNames());
 
       // and call the plugin client code
@@ -3681,8 +3681,8 @@ namespace OFX {
       // make a roi setter object
       OFX::Private::VersionIDKey key;
       key.id = plugname;
-      key.major = majorVersion;
-      key.minor = minorVersion;
+      key.major_version = majorVersion;
+      key.minor_version = minorVersion;
       ActualSetter setFrames(outArgs, gEffectDescriptors[key][effectInstance->getContext()]->getClipFrameRangePropNames());
 
       // and call the plugin client code
@@ -3777,8 +3777,8 @@ namespace OFX {
       // set up our clip preferences setter
       OFX::Private::VersionIDKey key;
       key.id = plugname;
-      key.major = majorVersion;
-      key.minor = minorVersion;
+      key.major_version = majorVersion;
+      key.minor_version = minorVersion;
       ImageEffectDescriptor* desc = gEffectDescriptors[key][effectInstance->getContext()];
       ClipPreferencesSetter prefs(outArgs, desc->getClipDepthPropNames(), desc->getClipComponentPropNames(), desc->getClipPARPropNames());
 
@@ -3910,8 +3910,8 @@ namespace OFX {
         
         OFX::Private::VersionIDKey key;
         key.id = plugname;
-        key.major = majorVersion;
-        key.minor = minorVersion;
+        key.major_version = majorVersion;
+        key.minor_version = minorVersion;
         ImageEffectDescriptor* desc = gEffectDescriptors[key][effectInstance->getContext()];
         FrameViewsNeededSetter setter(outArgs,desc->getClipFrameViewsPropNames());
         effectInstance->getFrameViewsNeeded(args,setter);
@@ -3932,8 +3932,8 @@ namespace OFX {
         
         OFX::Private::VersionIDKey key;
         key.id = plugname;
-        key.major = majorVersion;
-        key.minor = minorVersion;
+        key.major_version = majorVersion;
+        key.minor_version = minorVersion;
         ImageEffectDescriptor* desc = gEffectDescriptors[key][effectInstance->getContext()];
         ClipComponentsSetter setter(outArgs,desc->getClipPlanesPropNames());
         effectInstance->getClipComponents(args,setter);
@@ -4056,8 +4056,8 @@ namespace OFX {
           // add it to our map
           OFX::Private::VersionIDKey key;
           key.id = it->first;
-          key.major = it->second._plug->pluginVersionMajor;
-          key.minor = it->second._plug->pluginVersionMinor;
+          key.major_version = it->second._plug->pluginVersionMajor;
+          key.minor_version = it->second._plug->pluginVersionMinor;
           gEffectDescriptors[key][eContextNone] = desc;
 
           // got here, must be good
@@ -4082,8 +4082,8 @@ namespace OFX {
           // add it to our map
           OFX::Private::VersionIDKey key;
           key.id = it->first;
-          key.major = it->second._plug->pluginVersionMajor;
-          key.minor = it->second._plug->pluginVersionMinor;
+          key.major_version = it->second._plug->pluginVersionMajor;
+          key.minor_version = it->second._plug->pluginVersionMinor;
           gEffectDescriptors[key][context] = desc;
 
           // got here, must be good
diff --git a/Support/Library/ofxsSupportPrivate.h b/Support/Library/ofxsSupportPrivate.h
index 84e9af0..d1b3d5f 100644
--- a/Support/Library/ofxsSupportPrivate.h
+++ b/Support/Library/ofxsSupportPrivate.h
@@ -129,22 +129,22 @@ namespace OFX {
     
     struct VersionIDKey
     {
-        unsigned int major,minor;
+        unsigned int major_version,minor_version;
         std::string id;
         
-        VersionIDKey(): major(0), minor(0), id() {}
+        VersionIDKey(): major_version(0), minor_version(0), id() {}
         
         bool operator< (const VersionIDKey& rhs) const
         {
             if (id == rhs.id) {
-                if (major == rhs.major) {
-                    if (minor == rhs.minor) {
+                if (major_version == rhs.major_version) {
+                    if (minor_version == rhs.minor_version) {
                         return false;
                     } else {
-                        return minor < rhs.minor;
+                        return minor_version < rhs.minor_version;
                     }
                 } else {
-                    return major < rhs.major;
+                    return major_version < rhs.major_version;
                 }
             } else {
                 return id < rhs.id;
-- 
2.9.3

