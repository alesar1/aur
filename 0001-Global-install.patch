From aece46df8cdb10eb92d5733ff34e4923fd03832e Mon Sep 17 00:00:00 2001
From: "Daniel M. Capella" <polyzen@archlinux.org>
Date: Tue, 4 Aug 2020 18:30:54 -0400
Subject: [PATCH] Global install

---
 src/swapper.rs   |  3 +--
 tmux-thumbs.sh   |  6 ++----
 tmux-thumbs.tmux | 10 +---------
 3 files changed, 4 insertions(+), 15 deletions(-)

diff --git a/src/swapper.rs b/src/swapper.rs
index 05c1365..8ba0b7b 100644
--- a/src/swapper.rs
+++ b/src/swapper.rs
@@ -215,10 +215,9 @@ impl<'a> Swapper<'a> {
 
     // NOTE: For debugging add echo $PWD && sleep 5 after tee
     let pane_command = format!(
-        "tmux capture-pane -t {} -p{} | {}/target/release/thumbs -f '%U:%H' -t {} {}; tmux swap-pane -t {} {}; tmux wait-for -S {}",
+        "tmux capture-pane -t {} -p{} | thumbs -f '%U:%H' -t {} {}; tmux swap-pane -t {} {}; tmux wait-for -S {}",
         active_pane_id,
         scroll_params,
-        self.dir,
         TMP_FILE,
         args.join(" "),
         active_pane_id,
diff --git a/tmux-thumbs.sh b/tmux-thumbs.sh
index 92d5625..f1e0a26 100755
--- a/tmux-thumbs.sh
+++ b/tmux-thumbs.sh
@@ -1,8 +1,6 @@
 #!/usr/bin/env bash
 set -Eeu -o pipefail
 
-CURRENT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
-
 function get-opt-value() {
   tmux show -vg "@thumbs-${1}" 2> /dev/null
 }
@@ -21,7 +19,7 @@ function get-opt-arg() {
   fi
 }
 
-PARAMS=(--dir "${CURRENT_DIR}")
+PARAMS=(--dir /usr/share/thumbs)
 
 function add-param() {
   local type opt arg
@@ -35,4 +33,4 @@ add-param command        string
 add-param upcase-command string
 add-param osc52          boolean
 
-"${CURRENT_DIR}/target/release/tmux-thumbs" "${PARAMS[@]}" || true
+tmux-thumbs "${PARAMS[@]}" || true
diff --git a/tmux-thumbs.tmux b/tmux-thumbs.tmux
index 4fc9355..dc03d1d 100755
--- a/tmux-thumbs.tmux
+++ b/tmux-thumbs.tmux
@@ -1,16 +1,8 @@
 #!/usr/bin/env bash
 
-CURRENT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
-
 DEFAULT_THUMBS_KEY=space
 
 THUMBS_KEY="$(tmux show-option -gqv @thumbs-key)"
 THUMBS_KEY=${THUMBS_KEY:-$DEFAULT_THUMBS_KEY}
 
-tmux bind-key "${THUMBS_KEY}" run-shell -b "${CURRENT_DIR}/tmux-thumbs.sh"
-
-BINARY="${CURRENT_DIR}/target/release/thumbs"
-
-if [ ! -f "$BINARY" ]; then
-  tmux split-window "cd ${CURRENT_DIR} && cargo build --release --target-dir=target && echo 'Press any key to continue...' && read -k1"
-fi
+tmux bind-key "${THUMBS_KEY}" run-shell -b /usr/share/thumbs/tmux-thumbs.sh
-- 
2.29.2

